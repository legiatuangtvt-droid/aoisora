'use client';

import React from 'react';
import { Department, DepartmentId } from '@/types/userInfo';

interface DepartmentCardProps {
  department: Department;
  onToggle: (departmentId: DepartmentId) => void;
}

// Department icons - inline SVG for better performance and dynamic colors
const DepartmentIcon: React.FC<{ icon: string; color: string }> = ({ icon, color }) => {
  const iconMap: Record<string, React.ReactNode> = {
    admin: (
      <svg className="w-5 h-5" viewBox="0 0 18 20" fill={color}>
        <path d="M8.36 0.133331C8.76 -0.0444465 9.24 -0.0444465 9.64 0.133331L17.14 3.48333C17.67 3.72333 18 4.24333 18 4.81333V8.66666C18 13.84 14.3 18.56 9.38 19.94C9.13 20.02 8.87 20.02 8.62 19.94C3.7 18.56 0 13.84 0 8.66666V4.81333C0 4.24333 0.33 3.72333 0.86 3.48333L8.36 0.133331ZM9 2.17333L2 5.29333V8.66666C2 12.68 4.94 16.46 9 17.7133V2.17333Z" />
      </svg>
    ),
    op: (
      <svg className="w-5 h-5" viewBox="0 0 20 21" fill={color}>
        <path d="M10.0002 0.833313C10.4422 0.833313 10.8661 1.00891 11.1787 1.32147C11.4912 1.63403 11.6668 2.05795 11.6668 2.49998C11.6668 2.74698 11.6172 2.98331 11.5225 3.20348L12.9695 3.62315C13.3402 3.73065 13.6785 3.92831 13.9545 4.19848L14.1642 4.40231L15.5308 3.61531C15.4522 3.38198 15.4168 3.13615 15.4168 2.88548C15.4168 2.44345 15.5924 2.01953 15.905 1.70697C16.2176 1.39441 16.6415 1.21881 17.0835 1.21881C17.5255 1.21881 17.9495 1.39441 18.262 1.70697C18.5746 2.01953 18.7502 2.44345 18.7502 2.88548C18.7502 3.32751 18.5746 3.75143 18.262 4.06399C17.9495 4.37655 17.5255 4.55215 17.0835 4.55215C17.0152 4.55215 16.9478 4.54865 16.8808 4.54048L15.5318 5.31881C15.8005 5.75181 15.9572 6.24165 15.9928 6.74865L16.0012 6.95481L16.0182 8.32698C16.0182 8.79831 15.8568 9.24881 15.5575 9.60181L14.9172 10.3555C14.4295 10.9281 14.1668 11.6598 14.1668 12.4158V13.0418L14.8212 13.5845C15.0485 13.773 15.2319 14.0095 15.3576 14.2771C15.4834 14.5446 15.5485 14.8365 15.5485 15.132C15.5485 15.4275 15.4834 15.7194 15.3576 15.9869C15.2319 16.2544 15.0485 16.491 14.8212 16.6795L13.0712 18.1295C12.9308 18.2466 12.7685 18.334 12.594 18.3868C12.4194 18.4395 12.236 18.4566 12.0548 18.437C11.8736 18.4174 11.6983 18.3615 11.5395 18.2727C11.3807 18.1838 11.2416 18.0639 11.1305 17.9201L10.6675 17.3118L9.59884 18.0488C9.42099 18.1726 9.21294 18.247 8.99594 18.2644C8.77894 18.2817 8.5612 18.2414 8.36484 18.1475L8.05217 17.9913L7.9135 18.1565C7.6135 18.5125 7.17684 18.7251 6.71017 18.7438L6.53234 18.7453L5.78984 18.7486C5.25117 18.7498 4.7285 18.5675 4.3095 18.2306C3.89076 17.8958 3.60079 17.4264 3.48684 16.9006L3.19784 15.5955L2.2605 15.2996C1.80417 15.1551 1.41034 14.8623 1.14117 14.4681L1.01517 14.2686C0.785621 13.885 0.66552 13.4467 0.666837 12.9998V11.0415C0.666837 10.1665 1.06684 9.33715 1.75 8.77631L2.80884 7.90715C2.93367 7.80481 3.04634 7.68881 3.14434 7.56165L4.90017 5.27198C5.24184 4.82698 5.68467 4.46898 6.19034 4.22715L6.97917 3.84931C7.42184 3.08715 8.00367 2.43798 8.71334 1.94815C9.03334 1.72798 9.40667 1.58315 9.80084 1.53148C9.88717 1.12031 10.1022 0.94998 10.0002 0.833313ZM7.13684 5.51831L6.918 5.62315C6.65234 5.75098 6.41917 5.93965 6.23517 6.17648L4.47934 8.46615C4.31267 8.68398 4.12284 8.88315 3.91267 9.05798L2.85267 9.92598C2.51101 10.2055 2.33184 10.613 2.3335 11.0401V12.9998C2.3335 13.3011 2.49984 13.5821 2.7595 13.7338L3.30417 14.0508C3.78717 14.3328 4.09517 14.8325 4.13984 15.39L4.21817 16.396C4.24634 16.7541 4.49584 17.0563 4.83867 17.1508L5.44034 17.3158C5.93634 17.4521 6.47284 17.2881 6.80684 16.8906L7.3775 16.2133C7.66417 15.8728 8.05684 15.6396 8.49267 15.5516L9.57084 15.3371C9.87417 15.2758 10.1638 15.1608 10.4262 14.9975L11.3705 14.4091C11.6035 14.2628 11.7475 14.0086 11.7512 13.7361L11.7602 12.3966C11.7682 10.9813 12.2658 9.61081 13.1688 8.51465L13.4712 8.14898L13.4535 6.80631C13.4535 6.34998 13.2658 5.91448 12.9402 5.59115L12.7312 5.38848C12.5195 5.18115 12.2512 5.04281 11.9588 4.98998L10.5125 4.71731C9.72217 4.56865 8.9005 4.85881 8.35167 5.47731L8.21684 5.63515C8.11567 5.75698 7.96917 5.83531 7.80817 5.85265C7.64717 5.86998 7.48567 5.82365 7.3585 5.72481L7.13684 5.51831ZM9.27767 9.76881C9.27767 9.44731 9.40536 9.13899 9.63258 8.91177C9.8598 8.68454 10.1681 8.55681 10.4897 8.55681C10.8112 8.55681 11.1195 8.68454 11.3467 8.91177C11.574 9.13899 11.7017 9.44731 11.7017 9.76881C11.7017 10.0903 11.574 10.3986 11.3467 10.6259C11.1195 10.8531 10.8112 10.9808 10.4897 10.9808C10.1681 10.9808 9.8598 10.8531 9.63258 10.6259C9.40536 10.3986 9.27767 10.0903 9.27767 9.76881Z" />
      </svg>
    ),
    control: (
      <svg className="w-5 h-5" viewBox="0 0 22 22" fill={color}>
        <path d="M4 7C5.06087 7 6.07828 7.42143 6.82843 8.17157C7.57857 8.92172 8 9.93913 8 11C8 12.0609 7.57857 13.0783 6.82843 13.8284C6.07828 14.5786 5.06087 15 4 15C2.93913 15 1.92172 14.5786 1.17157 13.8284C0.421427 13.0783 0 12.0609 0 11C0 9.93913 0.421427 8.92172 1.17157 8.17157C1.92172 7.42143 2.93913 7 4 7ZM11 0C12.0609 0 13.0783 0.421427 13.8284 1.17157C14.5786 1.92172 15 2.93913 15 4C15 5.06087 14.5786 6.07828 13.8284 6.82843C13.0783 7.57857 12.0609 8 11 8C9.93913 8 8.92172 7.57857 8.17157 6.82843C7.42143 6.07828 7 5.06087 7 4C7 2.93913 7.42143 1.92172 8.17157 1.17157C8.92172 0.421427 9.93913 0 11 0ZM11 14C12.0609 14 13.0783 14.4214 13.8284 15.1716C14.5786 15.9217 15 16.9391 15 18C15 19.0609 14.5786 20.0783 13.8284 20.8284C13.0783 21.5786 12.0609 22 11 22C9.93913 22 8.92172 21.5786 8.17157 20.8284C7.42143 20.0783 7 19.0609 7 18C7 16.9391 7.42143 15.9217 8.17157 15.1716C8.92172 14.4214 9.93913 14 11 14ZM18 7C19.0609 7 20.0783 7.42143 20.8284 8.17157C21.5786 8.92172 22 9.93913 22 11C22 12.0609 21.5786 13.0783 20.8284 13.8284C20.0783 14.5786 19.0609 15 18 15C16.9391 15 15.9217 14.5786 15.1716 13.8284C14.4214 13.0783 14 12.0609 14 11C14 9.93913 14.4214 8.92172 15.1716 8.17157C15.9217 7.42143 16.9391 7 18 7ZM18 9C17.4696 9 16.9609 9.21071 16.5858 9.58579C16.2107 9.96086 16 10.4696 16 11C16 11.5304 16.2107 12.0391 16.5858 12.4142C16.9609 12.7893 17.4696 13 18 13C18.5304 13 19.0391 12.7893 19.4142 12.4142C19.7893 12.0391 20 11.5304 20 11C20 10.4696 19.7893 9.96086 19.4142 9.58579C19.0391 9.21071 18.5304 9 18 9ZM11 16C10.4696 16 9.96086 16.2107 9.58579 16.5858C9.21071 16.9609 9 17.4696 9 18C9 18.5304 9.21071 19.0391 9.58579 19.4142C9.96086 19.7893 10.4696 20 11 20C11.5304 20 12.0391 19.7893 12.4142 19.4142C12.7893 19.0391 13 18.5304 13 18C13 17.4696 12.7893 16.9609 12.4142 16.5858C12.0391 16.2107 11.5304 16 11 16ZM11 2C10.4696 2 9.96086 2.21071 9.58579 2.58579C9.21071 2.96086 9 3.46957 9 4C9 4.53043 9.21071 5.03914 9.58579 5.41421C9.96086 5.78929 10.4696 6 11 6C11.5304 6 12.0391 5.78929 12.4142 5.41421C12.7893 5.03914 13 4.53043 13 4C13 3.46957 12.7893 2.96086 12.4142 2.58579C12.0391 2.21071 11.5304 2 11 2Z" />
      </svg>
    ),
    improvement: (
      <svg className="w-5 h-5" viewBox="0 0 22 22" fill={color}>
        <path fillRule="evenodd" clipRule="evenodd" d="M16.1558 5.06605e-08H16.9168C17.7888 5.06605e-08 18.5168 0 19.0968 0.078C19.7068 0.16 20.2628 0.34 20.7098 0.786C21.1568 1.232 21.3398 1.787 21.4218 2.398C21.4998 2.976 21.4998 3.702 21.4998 4.571V5.331C21.4998 6.381 21.4998 7.118 21.2198 7.792C20.9398 8.466 20.4178 8.987 19.6728 9.729L19.5728 9.829L16.9028 12.491L16.9958 12.634C17.3898 13.242 17.7088 13.734 17.9388 14.159C18.1768 14.599 18.3468 15.012 18.4148 15.469C18.5216 16.2076 18.4248 16.9614 18.1348 17.649C18.0278 17.907 17.8428 18.176 17.6528 18.421C17.4528 18.679 17.2088 18.959 16.9468 19.244C16.3917 19.8379 15.8243 20.42 15.2448 20.99L15.1538 21.08C14.4338 21.798 13.1858 21.566 12.8018 20.603C12.5748 20.031 12.4818 19.803 12.3668 19.593C12.2601 19.3981 12.1373 19.2125 11.9998 19.038C11.8538 18.851 11.6838 18.678 11.2598 18.257L10.7548 17.814L10.7348 17.795C10.6403 17.8078 10.5451 17.8138 10.4498 17.813C9.81776 17.813 9.29676 17.55 8.80576 17.176C8.34176 16.823 7.82576 16.309 7.20976 15.695L5.76276 14.252C5.14676 13.638 4.63176 13.124 4.27676 12.661C3.90276 12.171 3.63676 11.651 3.63676 11.019C3.63743 10.9057 3.6461 10.7933 3.66276 10.682L2.83276 9.855L2.74576 9.768C2.34215 9.37609 1.86219 9.07144 1.33576 8.873L0.957764 8.723C0.724085 8.63069 0.517053 8.48168 0.355331 8.2894C0.193609 8.09711 0.0822823 7.86761 0.0313876 7.62157C-0.0195072 7.37553 -0.00837011 7.12069 0.063795 6.88002C0.13596 6.63936 0.266884 6.42044 0.444764 6.243L0.451764 6.235C1.02368 5.65733 1.60747 5.09154 2.20276 4.538C2.48976 4.277 2.77076 4.034 3.02776 3.835C3.27476 3.645 3.54476 3.46 3.80176 3.354C4.4912 3.06542 5.24602 2.96934 5.98576 3.076C6.44276 3.143 6.85576 3.312 7.29676 3.55C7.72276 3.78 8.21676 4.097 8.82676 4.49L8.97476 4.585L11.6468 1.92L11.7468 1.821C12.4908 1.078 13.0128 0.557 13.6888 0.278C14.3648 -0.000999957 15.1018 5.06605e-08 16.1558 5.06605e-08ZM7.88676 5.669C7.32676 5.309 6.92376 5.053 6.58576 4.87C6.22576 4.677 5.98576 4.592 5.76576 4.56C5.29477 4.49285 4.81438 4.55471 4.37576 4.739C4.22196 4.81784 4.07712 4.91305 3.94376 5.023C3.73176 5.186 3.48476 5.399 3.21376 5.646C2.63228 6.1867 2.06215 6.73948 1.50376 7.304L1.49976 7.31V7.317L1.50276 7.325L1.51076 7.329L1.89376 7.481L2.02176 7.532C2.67942 7.80288 3.27944 8.19657 3.78976 8.692C3.81776 8.718 3.84476 8.745 3.88776 8.789L4.36576 9.265C4.4311 9.18367 4.4991 9.103 4.56976 9.023C4.89176 8.655 5.30476 8.243 5.78376 7.766L7.88676 5.669ZM12.2038 17.089L12.2848 17.16L12.3368 17.212C12.7268 17.602 12.9698 17.842 13.1808 18.112C13.3681 18.352 13.5351 18.6053 13.6818 18.872C13.8418 19.163 13.9658 19.47 14.1588 19.955L14.1788 19.935C14.7449 19.3783 15.2994 18.8099 15.8418 18.23C16.0898 17.96 16.3038 17.713 16.4668 17.502C16.5776 17.3698 16.6732 17.2256 16.7518 17.072C16.9363 16.6359 16.9981 16.1577 16.9308 15.689C16.8988 15.471 16.8138 15.232 16.6208 14.874C16.4368 14.536 16.1798 14.134 15.8168 13.574L13.7078 15.676C13.2178 16.164 12.7958 16.585 12.4208 16.909C12.3495 16.9703 12.2771 17.0303 12.2038 17.089ZM16.2968 1.5C15.0448 1.5 14.6268 1.513 14.2608 1.664C13.8958 1.815 13.5908 2.1 12.7058 2.983L6.85876 8.812C6.36076 9.309 5.98276 9.686 5.69876 10.012C5.41176 10.337 5.26576 10.561 5.19476 10.737C5.1561 10.826 5.13635 10.922 5.13676 11.019C5.13676 11.189 5.19576 11.393 5.46876 11.749C5.75376 12.123 6.19676 12.566 6.85876 13.227L7.01576 13.383L8.54576 11.857C8.68673 11.7164 8.87775 11.6376 9.07682 11.6379C9.27589 11.6382 9.4667 11.7175 9.60726 11.8585C9.74783 11.9995 9.82664 12.1905 9.82636 12.3896C9.82608 12.5886 9.74673 12.7794 9.60576 12.92L8.07876 14.442L8.23176 14.596C8.89476 15.256 9.33876 15.697 9.71376 15.982C10.0718 16.254 10.2768 16.313 10.4498 16.313C10.5387 16.3137 10.6269 16.2974 10.7098 16.265C10.8848 16.201 11.1078 16.061 11.4398 15.775C11.7698 15.489 12.1558 15.105 12.6668 14.595L18.5138 8.767C19.3988 7.884 19.6838 7.581 19.8348 7.217C19.9858 6.853 19.9998 6.439 19.9998 5.19V4.623C19.9998 3.689 19.9978 3.063 19.9348 2.598C19.8748 2.155 19.7728 1.969 19.6508 1.848C19.5288 1.727 19.3428 1.624 18.8968 1.564C18.4288 1.502 17.8018 1.5 16.8648 1.5H16.2968ZM15.4128 6.074C15.1887 5.85105 14.8854 5.72589 14.5693 5.72589C14.2531 5.72589 13.9499 5.85105 13.7258 6.074C13.6151 6.1837 13.5273 6.31424 13.4673 6.45807C13.4074 6.6019 13.3765 6.75618 13.3765 6.912C13.3765 7.06782 13.4074 7.2221 13.4673 7.36593C13.5273 7.50976 13.6151 7.6403 13.7258 7.75C13.9499 7.97295 14.2531 8.09811 14.5693 8.09811C14.8854 8.09811 15.1887 7.97295 15.4128 7.75C15.5234 7.6403 15.6113 7.50976 15.6712 7.36593C15.7311 7.2221 15.762 7.06782 15.762 6.912C15.762 6.75618 15.7311 6.6019 15.6712 6.45807C15.6113 6.31424 15.5234 6.1837 15.4128 6.074ZM12.6668 5.01C13.1721 4.50645 13.8564 4.22371 14.5698 4.22371C15.2831 4.22371 15.9674 4.50645 16.4728 5.01C16.7233 5.25906 16.9221 5.55518 17.0577 5.88134C17.1934 6.2075 17.2632 6.55726 17.2632 6.9105C17.2632 7.26374 17.1934 7.6135 17.0577 7.93966C16.9221 8.26582 16.7233 8.56194 16.4728 8.811C15.9674 9.31455 15.2831 9.59729 14.5698 9.59729C13.8564 9.59729 13.1721 9.31455 12.6668 8.811C12.4164 8.56196 12.2178 8.2659 12.0822 7.93983C11.9466 7.61376 11.8768 7.26412 11.8768 6.911C11.8768 6.55788 11.9466 6.20823 12.0822 5.88217C12.2178 5.5561 12.4164 5.25904 12.6668 5.01Z" />
      </svg>
    ),
    hr: (
      <svg className="w-5 h-5" viewBox="0 0 18 13" fill={color}>
        <path d="M7 2C7 0.896875 7.89687 0 9 0C10.1031 0 11 0.896875 11 2C11 3.10313 10.1031 4 9 4C7.89687 4 7 3.10313 7 2ZM5.5 8.5C5.5 6.56563 7.06563 5 9 5C10.9344 5 12.5 6.56563 12.5 8.5V8.75C12.5 9.16562 12.1656 9.5 11.75 9.5H6.25C5.83437 9.5 5.5 9.16562 5.5 8.75V8.5ZM12.25 2.5C12.25 1.53437 13.0344 0.75 14 0.75C14.9656 0.75 15.75 1.53437 15.75 2.5C15.75 3.46563 14.9656 4.25 14 4.25C13.0344 4.25 12.25 3.46563 12.25 2.5ZM13.1 5.6375C13.3844 5.54688 13.6875 5.5 14 5.5C15.6562 5.5 17 6.84375 17 8.5V8.83438C17 9.20312 16.7 9.5 16.3344 9.5H13.8719C13.9563 9.26562 14 9.0125 14 8.75V8.5C14 7.43437 13.6688 6.44687 13.1 5.6375ZM4.9 5.6375C4.33125 6.45 4 7.43437 4 8.5V8.75C4 9.0125 4.04375 9.26562 4.12813 9.5H1.66563C1.3 9.5 1 9.2 1 8.83438V8.5C1 6.84375 2.34375 5.5 4 5.5C4.3125 5.5 4.61562 5.54688 4.9 5.6375ZM2.25 2.5C2.25 1.53437 3.03437 0.75 4 0.75C4.96562 0.75 5.75 1.53437 5.75 2.5C5.75 3.46563 4.96562 4.25 4 4.25C3.03437 4.25 2.25 3.46563 2.25 2.5ZM0 11.75C0 11.3344 0.334375 11 0.75 11H17.25C17.6656 11 18 11.3344 18 11.75C18 12.1656 17.6656 12.5 17.25 12.5H0.75C0.334375 12.5 0 12.1656 0 11.75Z" />
      </svg>
    ),
    md: (
      <svg className="w-5 h-5" viewBox="0 0 20 18" fill={color}>
        <path d="M3 18V16H17V18H3ZM3 14.5L1.725 6.475C1.69167 6.475 1.654 6.47934 1.612 6.488C1.57 6.49667 1.53267 6.50067 1.5 6.5C1.08334 6.5 0.729336 6.354 0.438002 6.062C0.146669 5.77 0.000668939 5.416 2.27273e-06 5C-0.000664394 4.584 0.145336 4.23 0.438002 3.938C0.730669 3.646 1.08467 3.5 1.5 3.5C1.91534 3.5 2.26967 3.646 2.563 3.938C2.85634 4.23 3.002 4.584 3 5C3 5.11667 2.98734 5.225 2.962 5.325C2.93667 5.425 2.90767 5.51667 2.875 5.6L6 7L9.125 2.725C8.94167 2.59167 8.79167 2.41667 8.675 2.2C8.55834 1.98334 8.5 1.75 8.5 1.5C8.5 1.08334 8.646 0.729002 8.938 0.437002C9.23 0.145002 9.584 -0.000664389 10 2.2779e-06C10.416 0.000668945 10.7703 0.146669 11.063 0.438002C11.3557 0.729336 11.5013 1.08334 11.5 1.5C11.5 1.75 11.4417 1.98334 11.325 2.2C11.2083 2.41667 11.0583 2.59167 10.875 2.725L14 7L17.125 5.6C17.0917 5.51667 17.0623 5.425 17.037 5.325C17.0117 5.225 16.9993 5.11667 17 5C17 4.58334 17.146 4.229 17.438 3.937C17.73 3.645 18.084 3.49934 18.5 3.5C18.916 3.50067 19.2703 3.64667 19.563 3.938C19.8557 4.22934 20.0013 4.58334 20 5C19.9987 5.41667 19.853 5.771 19.563 6.063C19.273 6.355 18.9187 6.50067 18.5 6.5C18.4667 6.5 18.4293 6.496 18.388 6.488C18.3467 6.48 18.309 6.47567 18.275 6.475L17 14.5H3ZM4.7 12.5H15.3L15.95 8.325L13.325 9.475L10 4.9L6.675 9.475L4.05 8.325L4.7 12.5Z" />
      </svg>
    ),
  };

  return <>{iconMap[icon] || iconMap.admin}</>;
};

const DepartmentCard: React.FC<DepartmentCardProps> = ({
  department,
  onToggle,
}) => {
  return (
    <div
      className="bg-white border border-[#9B9B9B] rounded-[10px] p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors"
      onClick={() => onToggle(department.id)}
    >
      <div className="flex items-center gap-3">
        {/* Department Icon */}
        <div
          className="w-9 h-9 rounded-[5px] flex items-center justify-center"
          style={{ backgroundColor: department.iconBg }}
        >
          <DepartmentIcon icon={department.icon} color={department.iconColor} />
        </div>

        {/* Department Info */}
        <div className="flex flex-col gap-1">
          <span className="text-base font-bold text-black">{department.name}</span>
          <div className="flex items-center gap-2 text-[13px] text-[#6B6B6B]">
            <span>{department.memberCount} Members</span>
            <span className="w-[5px] h-[5px] rounded-full bg-[#6B6B6B]" />
            <span>{department.gradeRange}</span>
          </div>
        </div>
      </div>

      {/* Expand/Collapse Icon */}
      <button className="p-2 rounded-full">
        <svg
          className={`w-6 h-6 text-black transition-transform duration-300 ${
            department.isExpanded ? '' : 'rotate-180'
          }`}
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
        </svg>
      </button>
    </div>
  );
};

export default DepartmentCard;
