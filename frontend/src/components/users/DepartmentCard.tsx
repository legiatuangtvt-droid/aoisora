'use client';

import React from 'react';
import { Department, DepartmentId } from '@/types/userInfo';

interface DepartmentCardProps {
  department: Department;
  onToggle: (departmentId: DepartmentId) => void;
}

// Department icons - inline SVG for better performance and dynamic colors
const DepartmentIcon: React.FC<{ icon: string; color: string }> = ({ icon, color }) => {
  const iconMap: Record<string, React.ReactNode> = {
    admin: (
      <svg className="w-5 h-5" viewBox="0 0 18 20" fill={color}>
        <path d="M8 0C8.13333 0 8.25433 0.00833319 8.363 0.0249999C8.47167 0.0416665 8.584 0.075 8.7 0.125L14.7 2.375C15.0833 2.525 15.396 2.76667 15.638 3.1C15.88 3.43333 16.0007 3.80833 16 4.225V7.35C16 7.63333 15.9043 7.871 15.713 8.063C15.5217 8.255 15.284 8.35067 15 8.35C14.716 8.34933 14.4787 8.25333 14.288 8.062C14.0973 7.87067 14.0013 7.63333 14 7.35V4.25L8 2L2 4.25V8.95C2 9.78333 2.121 10.6167 2.363 11.45C2.605 12.2833 2.93833 13.075 3.363 13.825C3.78767 14.575 4.30433 15.25 4.913 15.85C5.52167 16.45 6.184 16.9417 6.9 17.325C7.15 17.4583 7.32933 17.65 7.438 17.9C7.54667 18.15 7.55067 18.4 7.45 18.65C7.33333 18.9167 7.146 19.1 6.888 19.2C6.63 19.3 6.37567 19.2833 6.125 19.15C4.24167 18.2167 2.75 16.8083 1.65 14.925C0.55 13.0417 0 11.05 0 8.95V4.225C0 3.80833 0.121 3.43333 0.363 3.1C0.605 2.76667 0.917333 2.525 1.3 2.375L7.3 0.125C7.41667 0.075 7.53333 0.0416665 7.65 0.0249999C7.76667 0.00833319 7.88333 0 8 0ZM13 19.85C11.6167 19.85 10.4377 19.3623 9.463 18.387C8.48833 17.4117 8.00067 16.2327 8 14.85C7.99933 13.4673 8.487 12.2883 9.463 11.313C10.439 10.3377 11.618 9.85 13 9.85C14.382 9.85 15.5613 10.3377 16.538 11.313C17.5147 12.2883 18.002 13.4673 18 14.85C17.998 16.2327 17.5103 17.412 16.537 18.388C15.5637 19.364 14.3847 19.8513 13 19.85ZM13 14.85C13.4167 14.85 13.771 14.7043 14.063 14.413C14.355 14.1217 14.5007 13.7673 14.5 13.35C14.4993 12.9327 14.3537 12.5787 14.063 12.288C13.7723 11.9973 13.418 11.8513 13 11.85C12.582 11.8487 12.228 11.9947 11.938 12.288C11.648 12.5813 11.502 12.9353 11.5 13.35C11.498 13.7647 11.644 14.119 11.938 14.413C12.232 14.707 12.586 14.8527 13 14.85ZM13 17.85C13.4167 17.85 13.8083 17.7707 14.175 17.612C14.5417 17.4533 14.8667 17.2243 15.15 16.925C15.2333 16.825 15.2667 16.7127 15.25 16.588C15.2333 16.4633 15.1583 16.3673 15.025 16.3C14.7083 16.15 14.3793 16.0377 14.038 15.963C13.6967 15.8883 13.3507 15.8507 13 15.85C12.6493 15.8493 12.3037 15.887 11.963 15.963C11.6223 16.039 11.293 16.1513 10.975 16.3C10.8417 16.3667 10.7667 16.4627 10.75 16.588C10.7333 16.7133 10.7667 16.8257 10.85 16.925C11.1333 17.225 11.4583 17.4543 11.825 17.613C12.1917 17.7717 12.5833 17.8507 13 17.85Z" />
      </svg>
    ),
    op: (
      <svg className="w-5 h-5" viewBox="0 0 20 21" fill={color}>
        <path d="M15.7392 12.5C16.8392 12.5 17.8392 12.9 18.5392 13.7L19.7392 12.5V16.5H15.7392L17.5392 14.7C17.0392 14.3 16.4392 14 15.7392 14C14.3392 14 13.2392 15.1 13.2392 16.5C13.2392 17.9 14.3392 19 15.7392 19C16.5392 19 17.2392 18.6 17.7392 18H19.4392C18.8392 19.5 17.4392 20.5 15.7392 20.5C13.5392 20.5 11.7392 18.7 11.7392 16.5C11.7392 14.3 13.5392 12.5 15.7392 12.5ZM9.23923 16.5C9.23923 15.4 9.53923 14.4 9.93923 13.5H9.73923C7.83923 13.5 6.23923 11.9 6.23923 10C6.23923 8.1 7.83923 6.5 9.73923 6.5C11.6392 6.5 13.2392 8.1 13.2392 10C13.2392 10.2 13.2392 10.4 13.1392 10.5C13.9392 10.2 14.7392 10 15.7392 10C16.2392 10 16.7392 10.1 17.2392 10.2V10C17.2392 9.7 17.2392 9.3 17.1392 9L19.2392 7.4C19.4392 7.2 19.4392 7 19.3392 6.8L17.3392 3.3C17.2392 3 17.0392 3 16.7392 3L14.2392 4C13.7392 3.6 13.1392 3.3 12.5392 3L12.1392 0.3C12.2392 0.2 11.9392 0 11.7392 0H7.73923C7.53923 0 7.23923 0.2 7.23923 0.4L6.83923 3.1C6.23923 3.3 5.73923 3.7 5.13923 4L2.73923 3C2.43923 3 2.23923 3 2.03923 3.3L0.0392305 6.8C-0.0607695 7 0.0392305 7.2 0.239231 7.4L2.33923 9C2.33923 9.3 2.23923 9.7 2.23923 10C2.23923 10.3 2.23923 10.7 2.33923 11L0.239231 12.7C0.0392305 12.9 0.0392306 13.1 0.139231 13.3L2.13923 16.8C2.23923 17 2.43923 17 2.73923 17L5.23923 16C5.73923 16.4 6.33923 16.7 6.93923 17L7.33923 19.7C7.33923 19.9 7.53923 20.1 7.83923 20.1H10.3392C9.63923 19 9.23923 17.8 9.23923 16.5Z" />
      </svg>
    ),
    control: (
      <svg className="w-5 h-5" viewBox="0 0 22 22" fill={color}>
        <path d="M4 7C5.06087 7 6.07828 7.42143 6.82843 8.17157C7.57857 8.92172 8 9.93913 8 11C8 12.0609 7.57857 13.0783 6.82843 13.8284C6.07828 14.5786 5.06087 15 4 15C2.93913 15 1.92172 14.5786 1.17157 13.8284C0.421427 13.0783 0 12.0609 0 11C0 9.93913 0.421427 8.92172 1.17157 8.17157C1.92172 7.42143 2.93913 7 4 7ZM11 0C12.0609 0 13.0783 0.421427 13.8284 1.17157C14.5786 1.92172 15 2.93913 15 4C15 5.06087 14.5786 6.07828 13.8284 6.82843C13.0783 7.57857 12.0609 8 11 8C9.93913 8 8.92172 7.57857 8.17157 6.82843C7.42143 6.07828 7 5.06087 7 4C7 2.93913 7.42143 1.92172 8.17157 1.17157C8.92172 0.421427 9.93913 0 11 0ZM11 14C12.0609 14 13.0783 14.4214 13.8284 15.1716C14.5786 15.9217 15 16.9391 15 18C15 19.0609 14.5786 20.0783 13.8284 20.8284C13.0783 21.5786 12.0609 22 11 22C9.93913 22 8.92172 21.5786 8.17157 20.8284C7.42143 20.0783 7 19.0609 7 18C7 16.9391 7.42143 15.9217 8.17157 15.1716C8.92172 14.4214 9.93913 14 11 14ZM18 7C19.0609 7 20.0783 7.42143 20.8284 8.17157C21.5786 8.92172 22 9.93913 22 11C22 12.0609 21.5786 13.0783 20.8284 13.8284C20.0783 14.5786 19.0609 15 18 15C16.9391 15 15.9217 14.5786 15.1716 13.8284C14.4214 13.0783 14 12.0609 14 11C14 9.93913 14.4214 8.92172 15.1716 8.17157C15.9217 7.42143 16.9391 7 18 7ZM18 9C17.4696 9 16.9609 9.21071 16.5858 9.58579C16.2107 9.96086 16 10.4696 16 11C16 11.5304 16.2107 12.0391 16.5858 12.4142C16.9609 12.7893 17.4696 13 18 13C18.5304 13 19.0391 12.7893 19.4142 12.4142C19.7893 12.0391 20 11.5304 20 11C20 10.4696 19.7893 9.96086 19.4142 9.58579C19.0391 9.21071 18.5304 9 18 9ZM11 16C10.4696 16 9.96086 16.2107 9.58579 16.5858C9.21071 16.9609 9 17.4696 9 18C9 18.5304 9.21071 19.0391 9.58579 19.4142C9.96086 19.7893 10.4696 20 11 20C11.5304 20 12.0391 19.7893 12.4142 19.4142C12.7893 19.0391 13 18.5304 13 18C13 17.4696 12.7893 16.9609 12.4142 16.5858C12.0391 16.2107 11.5304 16 11 16ZM11 2C10.4696 2 9.96086 2.21071 9.58579 2.58579C9.21071 2.96086 9 3.46957 9 4C9 4.53043 9.21071 5.03914 9.58579 5.41421C9.96086 5.78929 10.4696 6 11 6C11.5304 6 12.0391 5.78929 12.4142 5.41421C12.7893 5.03914 13 4.53043 13 4C13 3.46957 12.7893 2.96086 12.4142 2.58579C12.0391 2.21071 11.5304 2 11 2Z" />
      </svg>
    ),
    improvement: (
      <svg className="w-5 h-5" viewBox="0 0 22 22" fill={color}>
        <path fillRule="evenodd" clipRule="evenodd" d="M16.1558 5.06605e-08H16.9168C17.7888 5.06605e-08 18.5168 0 19.0968 0.078C19.7068 0.16 20.2628 0.34 20.7098 0.786C21.1568 1.232 21.3398 1.787 21.4218 2.398C21.4998 2.976 21.4998 3.702 21.4998 4.571V5.331C21.4998 6.381 21.4998 7.118 21.2198 7.792C20.9398 8.466 20.4178 8.987 19.6728 9.729L19.5728 9.829L16.9028 12.491L16.9958 12.634C17.3898 13.242 17.7088 13.734 17.9388 14.159C18.1768 14.599 18.3468 15.012 18.4148 15.469C18.5216 16.2076 18.4248 16.9614 18.1348 17.649C18.0278 17.907 17.8428 18.176 17.6528 18.421C17.4528 18.679 17.2088 18.959 16.9468 19.244C16.3917 19.8379 15.8243 20.42 15.2448 20.99L15.1538 21.08C14.4338 21.798 13.1858 21.566 12.8018 20.603C12.5748 20.031 12.4818 19.803 12.3668 19.593C12.2601 19.3981 12.1373 19.2125 11.9998 19.038C11.8538 18.851 11.6838 18.678 11.2598 18.257L10.7548 17.814L10.7348 17.795C10.6403 17.8078 10.5451 17.8138 10.4498 17.813C9.81776 17.813 9.29676 17.55 8.80576 17.176C8.34176 16.823 7.82576 16.309 7.20976 15.695L5.76276 14.252C5.14676 13.638 4.63176 13.124 4.27676 12.661C3.90276 12.171 3.63676 11.651 3.63676 11.019C3.63743 10.9057 3.6461 10.7933 3.66276 10.682L2.83276 9.855L2.74576 9.768C2.34215 9.37609 1.86219 9.07144 1.33576 8.873L0.957764 8.723C0.724085 8.63069 0.517053 8.48168 0.355331 8.2894C0.193609 8.09711 0.0822823 7.86761 0.0313876 7.62157C-0.0195072 7.37553 -0.00837011 7.12069 0.063795 6.88002C0.13596 6.63936 0.266884 6.42044 0.444764 6.243L0.451764 6.235C1.02368 5.65733 1.60747 5.09154 2.20276 4.538C2.48976 4.277 2.77076 4.034 3.02776 3.835C3.27476 3.645 3.54476 3.46 3.80176 3.354C4.4912 3.06542 5.24602 2.96934 5.98576 3.076C6.44276 3.143 6.85576 3.312 7.29676 3.55C7.72276 3.78 8.21676 4.097 8.82676 4.49L8.97476 4.585L11.6468 1.92L11.7468 1.821C12.4908 1.078 13.0128 0.557 13.6888 0.278C14.3648 -0.000999957 15.1018 5.06605e-08 16.1558 5.06605e-08ZM7.88676 5.669C7.32676 5.309 6.92376 5.053 6.58576 4.87C6.22576 4.677 5.98576 4.592 5.76576 4.56C5.29477 4.49285 4.81438 4.55471 4.37576 4.739C4.22196 4.81784 4.07712 4.91305 3.94376 5.023C3.73176 5.186 3.48476 5.399 3.21376 5.646C2.63228 6.1867 2.06215 6.73948 1.50376 7.304L1.49976 7.31V7.317L1.50276 7.325L1.51076 7.329L1.89376 7.481L2.02176 7.532C2.67942 7.80288 3.27944 8.19657 3.78976 8.692C3.81776 8.718 3.84476 8.745 3.88776 8.789L4.36576 9.265C4.4311 9.18367 4.4991 9.103 4.56976 9.023C4.89176 8.655 5.30476 8.243 5.78376 7.766L7.88676 5.669ZM12.2038 17.089L12.2848 17.16L12.3368 17.212C12.7268 17.602 12.9698 17.842 13.1808 18.112C13.3681 18.352 13.5351 18.6053 13.6818 18.872C13.8418 19.163 13.9658 19.47 14.1588 19.955L14.1788 19.935C14.7449 19.3783 15.2994 18.8099 15.8418 18.23C16.0898 17.96 16.3038 17.713 16.4668 17.502C16.5776 17.3698 16.6732 17.2256 16.7518 17.072C16.9363 16.6359 16.9981 16.1577 16.9308 15.689C16.8988 15.471 16.8138 15.232 16.6208 14.874C16.4368 14.536 16.1798 14.134 15.8168 13.574L13.7078 15.676C13.2178 16.164 12.7958 16.585 12.4208 16.909C12.3495 16.9703 12.2771 17.0303 12.2038 17.089ZM16.2968 1.5C15.0448 1.5 14.6268 1.513 14.2608 1.664C13.8958 1.815 13.5908 2.1 12.7058 2.983L6.85876 8.812C6.36076 9.309 5.98276 9.686 5.69876 10.012C5.41176 10.337 5.26576 10.561 5.19476 10.737C5.1561 10.826 5.13635 10.922 5.13676 11.019C5.13676 11.189 5.19576 11.393 5.46876 11.749C5.75376 12.123 6.19676 12.566 6.85876 13.227L7.01576 13.383L8.54576 11.857C8.68673 11.7164 8.87775 11.6376 9.07682 11.6379C9.27589 11.6382 9.4667 11.7175 9.60726 11.8585C9.74783 11.9995 9.82664 12.1905 9.82636 12.3896C9.82608 12.5886 9.74673 12.7794 9.60576 12.92L8.07876 14.442L8.23176 14.596C8.89476 15.256 9.33876 15.697 9.71376 15.982C10.0718 16.254 10.2768 16.313 10.4498 16.313C10.5387 16.3137 10.6269 16.2974 10.7098 16.265C10.8848 16.201 11.1078 16.061 11.4398 15.775C11.7698 15.489 12.1558 15.105 12.6668 14.595L18.5138 8.767C19.3988 7.884 19.6838 7.581 19.8348 7.217C19.9858 6.853 19.9998 6.439 19.9998 5.19V4.623C19.9998 3.689 19.9978 3.063 19.9348 2.598C19.8748 2.155 19.7728 1.969 19.6508 1.848C19.5288 1.727 19.3428 1.624 18.8968 1.564C18.4288 1.502 17.8018 1.5 16.8648 1.5H16.2968ZM15.4128 6.074C15.1887 5.85105 14.8854 5.72589 14.5693 5.72589C14.2531 5.72589 13.9499 5.85105 13.7258 6.074C13.6151 6.1837 13.5273 6.31424 13.4673 6.45807C13.4074 6.6019 13.3765 6.75618 13.3765 6.912C13.3765 7.06782 13.4074 7.2221 13.4673 7.36593C13.5273 7.50976 13.6151 7.6403 13.7258 7.75C13.9499 7.97295 14.2531 8.09811 14.5693 8.09811C14.8854 8.09811 15.1887 7.97295 15.4128 7.75C15.5234 7.6403 15.6113 7.50976 15.6712 7.36593C15.7311 7.2221 15.762 7.06782 15.762 6.912C15.762 6.75618 15.7311 6.6019 15.6712 6.45807C15.6113 6.31424 15.5234 6.1837 15.4128 6.074ZM12.6668 5.01C13.1721 4.50645 13.8564 4.22371 14.5698 4.22371C15.2831 4.22371 15.9674 4.50645 16.4728 5.01C16.7233 5.25906 16.9221 5.55518 17.0577 5.88134C17.1934 6.2075 17.2632 6.55726 17.2632 6.9105C17.2632 7.26374 17.1934 7.6135 17.0577 7.93966C16.9221 8.26582 16.7233 8.56194 16.4728 8.811C15.9674 9.31455 15.2831 9.59729 14.5698 9.59729C13.8564 9.59729 13.1721 9.31455 12.6668 8.811C12.4164 8.56196 12.2178 8.2659 12.0822 7.93983C11.9466 7.61376 11.8768 7.26412 11.8768 6.911C11.8768 6.55788 11.9466 6.20823 12.0822 5.88217C12.2178 5.5561 12.4164 5.25904 12.6668 5.01Z" />
      </svg>
    ),
    hr: (
      <svg className="w-5 h-5" viewBox="0 0 18 13" fill={color}>
        <path d="M7 2C7 0.896875 7.89687 0 9 0C10.1031 0 11 0.896875 11 2C11 3.10313 10.1031 4 9 4C7.89687 4 7 3.10313 7 2ZM5.5 8.5C5.5 6.56563 7.06563 5 9 5C10.9344 5 12.5 6.56563 12.5 8.5V8.75C12.5 9.16562 12.1656 9.5 11.75 9.5H6.25C5.83437 9.5 5.5 9.16562 5.5 8.75V8.5ZM12.25 2.5C12.25 1.53437 13.0344 0.75 14 0.75C14.9656 0.75 15.75 1.53437 15.75 2.5C15.75 3.46563 14.9656 4.25 14 4.25C13.0344 4.25 12.25 3.46563 12.25 2.5ZM13.1 5.6375C13.3844 5.54688 13.6875 5.5 14 5.5C15.6562 5.5 17 6.84375 17 8.5V8.83438C17 9.20312 16.7 9.5 16.3344 9.5H13.8719C13.9563 9.26562 14 9.0125 14 8.75V8.5C14 7.43437 13.6688 6.44687 13.1 5.6375ZM4.9 5.6375C4.33125 6.45 4 7.43437 4 8.5V8.75C4 9.0125 4.04375 9.26562 4.12813 9.5H1.66563C1.3 9.5 1 9.2 1 8.83438V8.5C1 6.84375 2.34375 5.5 4 5.5C4.3125 5.5 4.61562 5.54688 4.9 5.6375ZM2.25 2.5C2.25 1.53437 3.03437 0.75 4 0.75C4.96562 0.75 5.75 1.53437 5.75 2.5C5.75 3.46563 4.96562 4.25 4 4.25C3.03437 4.25 2.25 3.46563 2.25 2.5ZM0 11.75C0 11.3344 0.334375 11 0.75 11H17.25C17.6656 11 18 11.3344 18 11.75C18 12.1656 17.6656 12.5 17.25 12.5H0.75C0.334375 12.5 0 12.1656 0 11.75Z" />
      </svg>
    ),
    md: (
      <svg className="w-5 h-5" viewBox="0 0 20 18" fill={color}>
        <path d="M3 18V16H17V18H3ZM3 14.5L1.725 6.475C1.69167 6.475 1.654 6.47934 1.612 6.488C1.57 6.49667 1.53267 6.50067 1.5 6.5C1.08334 6.5 0.729336 6.354 0.438002 6.062C0.146669 5.77 0.000668939 5.416 2.27273e-06 5C-0.000664394 4.584 0.145336 4.23 0.438002 3.938C0.730669 3.646 1.08467 3.5 1.5 3.5C1.91534 3.5 2.26967 3.646 2.563 3.938C2.85634 4.23 3.002 4.584 3 5C3 5.11667 2.98734 5.225 2.962 5.325C2.93667 5.425 2.90767 5.51667 2.875 5.6L6 7L9.125 2.725C8.94167 2.59167 8.79167 2.41667 8.675 2.2C8.55834 1.98334 8.5 1.75 8.5 1.5C8.5 1.08334 8.646 0.729002 8.938 0.437002C9.23 0.145002 9.584 -0.000664389 10 2.2779e-06C10.416 0.000668945 10.7703 0.146669 11.063 0.438002C11.3557 0.729336 11.5013 1.08334 11.5 1.5C11.5 1.75 11.4417 1.98334 11.325 2.2C11.2083 2.41667 11.0583 2.59167 10.875 2.725L14 7L17.125 5.6C17.0917 5.51667 17.0623 5.425 17.037 5.325C17.0117 5.225 16.9993 5.11667 17 5C17 4.58334 17.146 4.229 17.438 3.937C17.73 3.645 18.084 3.49934 18.5 3.5C18.916 3.50067 19.2703 3.64667 19.563 3.938C19.8557 4.22934 20.0013 4.58334 20 5C19.9987 5.41667 19.853 5.771 19.563 6.063C19.273 6.355 18.9187 6.50067 18.5 6.5C18.4667 6.5 18.4293 6.496 18.388 6.488C18.3467 6.48 18.309 6.47567 18.275 6.475L17 14.5H3ZM4.7 12.5H15.3L15.95 8.325L13.325 9.475L10 4.9L6.675 9.475L4.05 8.325L4.7 12.5Z" />
      </svg>
    ),
  };

  return <>{iconMap[icon] || iconMap.admin}</>;
};

const DepartmentCard: React.FC<DepartmentCardProps> = ({
  department,
  onToggle,
}) => {
  return (
    <div
      className="bg-white border border-[#9B9B9B] rounded-[10px] p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors"
      onClick={() => onToggle(department.id)}
    >
      <div className="flex items-center gap-3">
        {/* Department Icon */}
        <div
          className="w-9 h-9 rounded-[5px] flex items-center justify-center"
          style={{ backgroundColor: department.iconBg }}
        >
          <DepartmentIcon icon={department.icon} color={department.iconColor} />
        </div>

        {/* Department Info */}
        <div className="flex flex-col gap-1">
          <span className="text-base font-bold text-black">{department.name}</span>
          <div className="flex items-center gap-2 text-[13px] text-[#6B6B6B]">
            <span>{department.memberCount} Members</span>
            <span className="w-[5px] h-[5px] rounded-full bg-[#6B6B6B]" />
            <span>{department.gradeRange}</span>
          </div>
        </div>
      </div>

      {/* Expand/Collapse Icon */}
      <button className="p-2 rounded-full">
        <svg
          className={`w-6 h-6 text-black transition-transform duration-300 ${
            department.isExpanded ? '' : 'rotate-180'
          }`}
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
        </svg>
      </button>
    </div>
  );
};

export default DepartmentCard;
