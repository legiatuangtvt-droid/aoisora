<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assign New Task</title>    
    <script>
        (function() {
            const v = new Date().getTime();
            document.write(`<link rel="icon" href="img/logo.png?v=${v}">`);
            document.write(`<link rel="stylesheet" href="css/styles.css?v=${v}">`);
            document.write(`<link rel="stylesheet" href="css/hq-create-task.css?v=${v}">`);
            document.write(`<script defer src="js/i18n.js?v=${v}"><\/script>`);
            document.write(`<script defer src="js/hq-create-task.js?v=${v}"><\/script>`);
        })();
    </script>
</head>
<body>
    <div class="container">
        <div class="home-screen">
            <button id="store-screen" data-i18n-key="go-to-store-screen">Go to Store screen</button>
            <h1 data-i18n-key="hq-system">HQ SYSTEM</h1>
        </div>

        <div class="button-group button-row">
            <div class="button-row-buttons">
                <button id="go-to-hq-tasks" data-i18n-key="hq-tasks">HQ Tasks</button>
                <button id="go-to-task-list" data-i18n-key="view-task-list">View Task List</button>
                <button id="go-to-create-task" class="selected" data-i18n-key="assign-new-task">Assign New Task</button>
                <button id="go-to-store-list" data-i18n-key="manage-stores">Manage Stores</button>
            </div>
            <h1 data-i18n-key="assign-new-task">Assign New Task</h1>
        </div>

        <form class="task-creation ct-form">
            <div class="form-row-of-fieldsets">
                <!-- Section 1: Repeat -->
                <fieldset class="fieldset-auto-width">
                    <legend data-i18n-key="is-repeat">Is Repeat</legend>
                    <div class="form-group" id="is-repeat">
                            <input type="radio" id="is-repeat-yes" name="is-repeat" value="Yes" checked>
                            <label for="is-repeat-yes" data-i18n-key="yes">Yes</label>
                            <input type="radio" id="is-repeat-no" name="is-repeat" value="No">
                            <label for="is-repeat-no" data-i18n-key="no">No</label>
                    </div>
                </fieldset>
                <!-- Section 2: Date -->
                <fieldset class="fieldset-flex-grow">
                    <legend data-i18n-key="date-range">Date Range</legend>
                    <div class="form-row">
                        <div class="form-group form-group-fixed">
                            <label for="start-day"><span data-i18n-key="start">Start</span><span class="required">*</span>:</label>
                            <input type="date" id="start-day" autocomplete="off">
                        </div>
                        <div class="form-group form-group-fixed">
                            <label for="end-day"><span data-i18n-key="end">End</span><span class="required">*</span>:</label>
                            <input type="date" id="end-day" autocomplete="off">
                        </div>
                    </div>
                </fieldset>
            </div>

            <div class="form-row-of-fieldsets">
                <!-- Section 3: Keyword -->
                <fieldset class="fieldset-flex-grow">
                    <legend><span data-i18n-key="keyword">Keyword</span><span class="required">*</span></legend>
                    <div class="form-keyword-group">
                        <input type="text" id="keyword" value="" data-i18n-key="enter-keyword" placeholder="Enter keyword" autocomplete="off">
                        <ul id="suggestion-list" class="suggestion-list"></ul>
                    </div>
                </fieldset>
                <!-- Section 4: Manual -->
                <fieldset class="fieldset-flex-grow">
                    <legend><span data-i18n-key="manual">Manual</span><span class="required">*</span></legend>
                    <div class="form-group manual-group">
                        <!-- Hidden input to store the URL for upload/submission logic -->
                        <input type="text" id="manual-link" data-i18n-key="paste-link-here" placeholder="Paste link here or upload a file" autocomplete="off">
                        <div id="manual-display-area" class="manual-display" style="display: none;">
                            <span id="manual-name-display"></span>
                            <a id="manual-url-link" href="#" target="_blank">View</a>
                        </div>
                        <input type="file" id="manual-file-input" style="display: none;" accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif" multiple>
                        <button type="button" id="upload-file" title="Upload File">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/>
                            </svg>
                        </button>
                    </div>
                </fieldset>
                </div>
            </fieldset>

            <!-- Row 3: Store Selection -->
            <fieldset class="form-group store-selection-group">
                <legend><span data-i18n-key="store-selection">Store Selection</span><span class="required">*</span></legend>
                <div class="store-filters">
                    <input type="text" id="store-filter" data-i18n-key="search-by-store-name" placeholder="Search by Store Name" autocomplete="off">
                    <input type="text" id="region-filter" data-i18n-key="search-by-region" placeholder="Search by Region" autocomplete="off">
                </div>
                <div class="store-actions">
                    <button type="button" id="check-button" data-i18n-key="check-selected">Check Selected</button>
                    <button type="button" id="add-button" data-i18n-key="add-to-task">Add to Task</button>
                </div>
                <div class="store-list-container">
                    <table id="store-list">
                        <caption id="storeTableTitle" data-i18n-key="selected-stores">Selected Stores</caption>
                        <thead>
                            <tr>
                                <th><input type="checkbox" title="Select All"></th>
                                <th data-i18n-key="store-code">Store Code</th>
                                <th data-i18n-key="store-name">Store Name</th>
                                <th data-i18n-key="region">Region</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Store rows will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </fieldset>

            <!-- Row 4: Task Details -->
            <fieldset class="form-group task-details-group">
                <legend data-i18n-key="task-details">Task Details</legend>
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="re"><span data-i18n-key="re-h">RE(h)</span><span class="required">*</span>:</label>
                        <input type="number" id="re" autocomplete="off">
                    </div>
                    <div class="form-group task-name-group">
                        <label for="task-name"><span data-i18n-key="task-name">Task Name</span><span class="required">*</span>:</label>
                        <input type="text" id="task-name" data-i18n-key="task-name" placeholder="Nhập tên task">
                    </div>
                </div>
                <div class="form-group-row">
                    <div class="form-group">
                        <label for="task-type"><span data-i18n-key="task-type">Task Type</span><span class="required">*</span>:</label>
                        <select id="task-type">
                            <option data-i18n-key="task-type-stats">Thống kê</option>
                            <option data-i18n-key="task-type-sort">Sắp xếp</option>
                            <option data-i18n-key="task-type-prepare">Chuẩn bị</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="response-type"><span data-i18n-key="response-type">Response Type</span><span class="required">*</span>:</label>
                        <div class="response-type-group">
                            <select id="response-type"></select>
                            <input type="number" id="response-type-number" style="width:50px;">
                        </div>

                        <!-- Checklist Container Row -->
                        <div id="checklist-container" class="form-group-row" style="display: none;">
                            <div class="form-group-spacer"></div> <!-- Spacer to align with Response Type -->
                            <div class="form-group checklist-wrapper">
                                <legend>
                                    <span data-i18n-key="response-type-checklist">Check List</span>
                                </legend>
                                <table id="checklist-table" class="checklist-table">
                                    <thead><tr><th data-i18n-key="no-short">STT</th><th data-i18n-key="task-details">Chi tiết Task</th><th>&nbsp;</th></tr></thead>
                                    <tbody></tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="3" id="checklist-message-cell"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                


                <div class="form-group">
                    <label for="task-details"><span data-i18n-key="task-details-for-store">Task Details for Store:</span></label>
                    <textarea id="task-details" data-i18n-key="write-request-for-store" placeholder="Write request for store"></textarea>
                </div>


            </fieldset>

            <div class="form-actions">
                <button type="button" id="add-repeat-task" data-i18n-key="add-as-repeat-task">Add as Repeat Task</button>
                <button type="button" id="create-task" data-i18n-key="create-task">Create Task</button>
            </div>
        </form>
    </div>
</body>

</html>