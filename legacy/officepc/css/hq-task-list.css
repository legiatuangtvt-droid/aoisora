/*
 * Styles for the HQ Task List page (hq-task-list.html)
 * This file contains styles specific to the charts and task table on this page.
 */

/* ===================================
   Loading Overlay
====================================== */
.split-view #report-content #loading-overlay {
  position: absolute; /* Changed from fixed to absolute */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.95);
  display: none; /* Hidden by default */
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease;
}

.split-view #report-content #loading-overlay.visible {
    display: flex; /* Shown when needed */
}

.loading-spinner {
  border: 8px solid #f3f3f3;
  border-top: 8px solid #3498db;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
 
.loading-text { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 20px; }
.progress-bar-container { width: 80%; max-width: 400px; background-color: #e0e0e0; border-radius: 10px; overflow: hidden; margin-bottom: 10px; }
.progress-bar { width: 0%; height: 20px; background-color: #4caf50; border-radius: 10px; transition: width 0.4s ease; }
.progress-text { font-size: 14px; font-weight: bold; color: #555; }

/* ===================================
   Main Content Layout
====================================== */
#content-wrapper {
  display: flex;
  justify-content: center; /* Center the single pane by default */
  gap: 30px;
}

.content-pane {
  width: 100%;
  transition: width 0.5s ease-in-out;
}

/* Split view mode */
.split-view .content-pane {
  position: relative; /* Needed for the absolute positioned overlay */
  width: 768px;
  border: 1px solid #d0ebff; /* Viền xanh nhạt đồng bộ */
  border-radius: 12px; /* Bo tròn góc */
  padding: 16px; /* Thêm khoảng đệm bên trong */
  background-color: #fff; /* Nền trắng để nổi bật */
  box-shadow: 0 2px 8px rgba(0,0,0,0.05); /* Đổ bóng nhẹ */
}

/* ===================================
   Charts Section
====================================== */
.section-title {
  text-align: center;
  font-size: 22px;
  font-weight: 700;
  color: #3949ab;
  margin-bottom: 16px;
}

.charts-section {
  margin-bottom: 24px;
}

.chart-controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 16px;
}

.chart-toggle {
  padding: 8px 16px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
}

.chart-toggle:hover {
  opacity: 0.9;
}

.chart-toggle.red {
    background-color: #d32f2f;
    color: #fff;
}

.chart-toggle.green {
    background-color: #388e3c;
    color: #fff;
}

.charts-container {
  display: flex;
  gap: 24px;
  justify-content: center;
  align-items: flex-start;
  flex-wrap: wrap; /* Added for responsiveness */
}

.chart-wrapper {
  flex: 1;
  min-width: 300px;
  max-width: 48%;
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Thêm lớp mới để xử lý ẩn biểu đồ */
.chart-wrapper.chart-hidden {
    /* Ẩn biểu đồ nhưng vẫn giữ không gian nó chiếm dụng */
    visibility: hidden;
    /* Ngăn không cho nó nhận tương tác */
    pointer-events: none;
    /* Giảm chiều cao để thu gọn một phần nếu cần, nhưng vẫn giữ chiều rộng */
    height: 0;
    padding: 0;
}

canvas {
  max-width: 100%;
  max-height: 100%;
}

/* ===================================
   Task List Section
====================================== */
.filters {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 20px;
  padding: 10px;
  background-color: #f3f8ff; /* Consistent with hq-store.css */
  border-radius: 12px;
  border: 1px solid #d0ebff; /* Consistent with hq-store.css */
}

.filters input[type="text"],
.filters input[type="date"] {
  padding: 8px;
  font-size: 14px;
  border: 1px solid #b0c4de; /* Consistent with hq-store.css */
  border-radius: 8px;
  background-color: #fff;
  flex-grow: 1; /* Make search input take available space */
}
 
/* === Export Button === */
#export-csv {
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    background-color: #1976d2; /* Blue color */
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s;
    white-space: nowrap; /* Prevent text wrapping */
}

#export-csv:hover {
    background-color: #2196f3; /* Lighter blue on hover */
}


#main-task-list-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  font-size: 14px;
  border-radius: 8px; /* Add rounded corners to the table */
  overflow: hidden; /* Clip content to rounded corners */
  box-shadow: 0 2px 8px rgba(0,0,0,0.05); /* Add a subtle shadow */
  table-layout: fixed;
}

#main-task-list-table th, #main-task-list-table td {
  text-align: center; /* Căn giữa nội dung các cột theo mặc định */
  padding: 6px 6px; /*Adjust padding */
  border: 1px solid #e0eaff; /* Thêm viền cho tất cả các ô */
  vertical-align: middle;
}

/* Căn trái lại cho cột Task (cột thứ 4) */
#main-task-list-table th:nth-child(4) {
  text-align: center;
}

#main-task-list-table th {
  text-align: center;
}

#main-task-list-table th {
  background-color: #f3f8ff; /* Consistent with popup header */
  color: #0d47a1; /* Consistent with popup header */
  font-weight: 600;
  text-transform: uppercase; /* Make headers uppercase */
  font-size: 12px;
  letter-spacing: 0.5px;
  vertical-align: middle; /* Căn giữa theo chiều dọc */
}

#main-task-list-table tbody tr:hover {
    background-color: #eaf6ff; /* Consistent hover effect */
    cursor: pointer;
}

#main-task-list-table tbody tr:last-child td {
    border-bottom: none; /* Remove border from last row */
}

#main-task-list-table th:nth-child(1) { width: 4%; }   /* No */
#main-task-list-table th:nth-child(2) { width: 6%; }   /* Week */
#main-task-list-table th:nth-child(3) { width: 15%; }  /* Responsible */
#main-task-list-table th:nth-child(4) { width: 43%; }  /* Task */
#main-task-list-table th:nth-child(5) { width: 9%; }   /* Progress */
#main-task-list-table th:nth-child(6) { width: 10%; }  /* Stores Unable */
#main-task-list-table th:nth-child(7) { width: 13%; }  /* Status */

.task-name {
  font-weight: 600;
  color: #333;
  margin-bottom: 5px;
}

.task-dates {
  font-size: 13px;
  color: #666;
}

.status {
  padding: 4px 8px;
  border-radius: 12px; /* Pill shape */
  font-weight: 600;
  font-size: 11px;
  color: white;
  display: inline-block;
  text-align: center;
  white-space: nowrap;
}

.status.waiting {
  background-color: #757575; /* Softer gray */
}

.status.reporting {
  background-color: #00838f; /* Softer teal */
}

.status.done {
  background-color: #388e3c; /* Green */
}

.status.onprogress {
  background-color: #1976d2; /* Blue */
}

.status.notyet {
  background-color: #f57c00; /* Orange */
}

.status.overdue {
  background-color: #d32f2f; /* Red */
}

.clickable {
  cursor: pointer;
  position: relative;
  color: #1976d2; /* Consistent blue */
  text-decoration: none;
  font-weight: 600;
}

.clickable:hover {
    text-decoration: underline;
}
.clickable.active-filter::after {
    content: ' ▼';
    font-size: 10px;
    color: #d32f2f;
    position: absolute;
    right: 5px;
}

/* ========================================================================== */
/* STYLES MERGED FROM hq-report.css */
/* ========================================================================== */

/* ===================================
   Report Section Layout
====================================== */
.report-section {
    background-color: #f9fcff;
    border: 1px solid #d0ebff;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 24px;
}

.report-section h2 {
    font-size: 18px;
    font-weight: 700;
    color: #3949ab;
    margin-top: 0;
    margin-bottom: 16px;
    text-align: center;
}

.report-filters {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
}

.report-filters select {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #b0c4de;
    background-color: #fff;
    font-size: 14px;
    min-width: 150px;
}

.report-filters select option.current-period {
    background-color: #e3f2fd; /* Màu nền xanh nhạt */
    font-weight: bold;         /* In đậm chữ */
    color: #0d47a1;            /* Màu chữ xanh đậm */
}

.report-filters select:focus {
    outline: none;
    border-color: #1976d2;
    box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
}

.chart-container {
    width: 100%;
    max-width: 800px;
    margin: 0 auto 20px auto;
    height: 350px;
}

.table-container {
    overflow-x: auto; /* Thêm thanh cuộn ngang khi bảng quá rộng */
    -webkit-overflow-scrolling: touch; /* Cải thiện trải nghiệm cuộn trên iOS */
}

/* Giới hạn chiều cao và thêm cuộn dọc cho bảng cửa hàng */
#task-table-container {
    max-height: 280px; /* Chiều cao ước tính cho 1 hàng header + 5 hàng dữ liệu */
    overflow-y: auto;
    position: relative; /* Cần thiết để a sticky header hoạt động đúng */
}

/* ===================================
   Report Table Styles
====================================== */
#task-table,
#task-table2 {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    background: white;
    font-size: 12px;
}

#task-table th, #task-table td,
#task-table2 th, #task-table2 td {
    padding: 10px 8px;
    text-align: center;
    border: 1px solid #e0eaff;
    white-space: nowrap;
}

#task-table th,
#task-table2 th {
    background-color: #f3f8ff;
    color: #0d47a1;
    font-weight: 600;
    letter-spacing: 0.5px;
    position: sticky;
    top: 0;
    z-index: 1;
}

#task-table tbody tr:hover,
#task-table2 tbody tr:hover {
    background-color: #eaf6ff;
}

/* Căn lề trái cho cột tên cửa hàng */
#task-table th:first-child,
#task-table td:first-child {
    text-align: left;
    white-space: normal;
    word-break: break-word;
    padding-left: 12px;
    width: 25%; /* Tăng độ rộng cho cột tên cửa hàng */
}

/* Tùy chỉnh độ rộng cột Average */
#task-table th:last-child,
#task-table td:last-child {
    width: 10%;
    font-weight: bold;
}

/* Tùy chỉnh riêng cho bảng phòng ban */
#task-table2 th,
#task-table2 td {
    white-space: normal;
    word-break: break-word;
    font-size: 11px;
    padding: 8px 4px;
}

/* Phân bổ lại độ rộng cho các cột trong bảng phòng ban */
#task-table2 th:first-child,
#task-table2 td:first-child {
    width: 20%; /* Tăng độ rộng cho cột Phòng ban */
}

/* Giảm độ rộng cho 3 cột cuối */
#task-table2 th:nth-last-child(1), #task-table2 td:nth-last-child(1),
#task-table2 th:nth-last-child(2), #task-table2 td:nth-last-child(2),
#task-table2 th:nth-last-child(3), #task-table2 td:nth-last-child(3) {
    width: 8%;
}

/* Xoay dọc các nhãn Planned/Unplanned trong header của bảng department */
#task-table2 thead tr:nth-child(2) th {
    writing-mode: vertical-rl; /* Xoay chữ dọc */
    white-space: nowrap; /* Ngăn không cho chữ bị ngắt dòng */
    padding: 10px 2px; /* Điều chỉnh lại padding cho phù hợp */
    vertical-align: middle; /* Căn chữ ra giữa ô */
}

/* ===================================
   Custom Button States
====================================== */
.button-row-buttons button.active-report {
    background: #d32f2f; /* Màu đỏ */
    color: #fff;
}

/* ===================================
   Pagination Styles
====================================== */
#pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    margin-top: 20px;
    user-select: none;
}

.page-btn {
    padding: 8px 12px;
    border: 1px solid #b0c4de;
    background-color: #fff;
    color: #1976d2;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s, color 0.2s;
}

.page-btn:hover:not(:disabled) {
    background-color: #eaf6ff;
}

.page-btn.active {
    background-color: #1976d2;
    color: #fff;
    border-color: #1976d2;
}

.page-btn:disabled {
    background-color: #f5f5f5;
    color: #ccc;
    cursor: not-allowed;
}

/* ===================================
   Responsive Adjustments for Split View
====================================== */
/* Áp dụng khi ở chế độ xem chia đôi */
.split-view #main-task-list-table {
    font-size: 13px; /* Giảm cỡ chữ chung của bảng */
}

.split-view #main-task-list-table th {
    font-size: 11px; /* Giảm cỡ chữ tiêu đề để vừa vặn hơn */
    padding: 10px 5px; /* Giảm khoảng đệm ngang của header */
}

.split-view #main-task-list-table .status {
    white-space: normal; /* Cho phép chữ trong status xuống dòng */
    word-break: break-word;
}

/* Đảm bảo cột Week luôn căn giữa, ngay cả trong split-view */
.split-view #main-task-list-table th:nth-child(2),
.split-view #main-task-list-table td:nth-child(2) {
    text-align: center !important;
}

/* ===================================
   Filter Popup Styles
====================================== */
.filter-popup {
    position: absolute;
    background-color: #fff;
    border: 1px solid #90caf9;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    z-index: 100;
    width: 280px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.filter-popup-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e0eaff;
}

.filter-popup-actions button {
    background: #f0f0f0;
    border: 1px solid #ccc;
    padding: 8px;
    border-radius: 6px;
    cursor: pointer;
    text-align: left;
    font-weight: 600;
}
.filter-popup-actions button:hover {
    background: #e0e0e0;
}

.filter-popup-search {
    width: 100%;
    padding: 8px;
    border: 1px solid #b0c4de;
    border-radius: 6px;
    box-sizing: border-box;
}

.filter-popup-list {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #e0eaff;
    padding: 5px;
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.filter-popup-list label {
    display: block;
    padding: 4px 8px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 14px;
}
.filter-popup-list label:hover {
    background-color: #eaf6ff;
}

.filter-popup-footer {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding-top: 10px;
    border-top: 1px solid #e0eaff;
}

.filter-popup-footer button {
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid #ccc;
    cursor: pointer;
}
