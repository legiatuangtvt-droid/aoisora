<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RE Task Manager - UI Spec Mockup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        body { background-color: #f3f4f6; padding: 20px; font-family: 'Segoe UI', sans-serif; }
        
        /* Button Styles */
        .btn { padding: 8px 16px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; display: inline-flex; items-center; gap: 8px; transition: 0.2s; border: 1px solid transparent;}
        .btn-primary { background: #2563eb; color: white; border-color: #2563eb; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-secondary { background: white; border-color: #d1d5db; color: #374151; }
        .btn-secondary:hover { background: #f9fafb; border-color: #9ca3af; }
        .btn-danger-text { color: #ef4444; }
        .btn-danger-text:hover { color: #dc2626; }
        
        /* Form Styles */
        .input { padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; width: 100%; transition: 0.2s; }
        .input:focus { border-color: #2563eb; outline: none; ring: 2px; }
        .input:disabled { background: #f3f4f6; color: #6b7280; cursor: not-allowed; }
        .label { font-size: 12px; font-weight: 600; color: #4b5563; margin-bottom: 4px; display: block; }
        
        /* Badge Styles */
        .badge { padding: 2px 8px; border-radius: 99px; font-size: 11px; font-weight: 600; }
        .badge-blue { background: #dbeafe; color: #1e40af; }
        .badge-green { background: #d1fae5; color: #065f46; }
        
        /* Modal Styles */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 50; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-content { background: white; border-radius: 8px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); max-height: 90vh; overflow-y: auto; transform: scale(0.95); transition: transform 0.3s; }
        .modal-overlay.active .modal-content { transform: scale(1); }
        
        /* Z-index layering for stacked modals */
        #modal-linked-task { z-index: 60; } 
    </style>
</head>
<body>

    <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden">
        
        <div class="px-6 py-5 border-b border-gray-200 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white">
            <div>
                <h1 class="text-2xl font-bold text-gray-800">Quản lý RE Task</h1>
                <p class="text-sm text-gray-500">Danh sách các đầu việc chuẩn cho hệ thống cửa hàng</p>
            </div>
            <div class="flex gap-3">
                <button class="btn btn-secondary" onclick="alert('Logic Import File')">
                    <i class="fa-solid fa-file-import"></i> Import
                </button>
                <button class="btn btn-secondary" onclick="alert('Logic Export File')">
                    <i class="fa-solid fa-file-export"></i> Export
                </button>
                <button class="btn btn-primary shadow-md" onclick="openModal('modal-edit-task')">
                    <i class="fa-solid fa-plus"></i> Thêm mới Task
                </button>
            </div>
        </div>

        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 grid grid-cols-12 gap-4 items-end">
            <div class="col-span-4">
                <label class="label">Tìm kiếm</label>
                <div class="relative">
                    <i class="fa-solid fa-magnifying-glass absolute left-3 top-3 text-gray-400"></i>
                    <input type="text" class="input pl-9" placeholder="Nhập tên task...">
                </div>
            </div>
            <div class="col-span-2">
                <label class="label">Nhóm (Group)</label>
                <select class="input"><option>Tất cả</option><option>DELICA</option><option>D&D</option></select>
            </div>
            <div class="col-span-2">
                <label class="label">Loại (Type)</label>
                <select class="input"><option>Tất cả</option><option>Fixed</option><option>CTM</option></select>
            </div>
            <div class="col-span-2">
                <button class="btn btn-secondary w-full justify-center">Lọc dữ liệu</button>
            </div>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-600">
                <thead class="text-xs text-gray-700 uppercase bg-gray-100 border-b border-gray-200">
                    <tr>
                        <th class="px-6 py-3 w-10">#</th>
                        <th class="px-6 py-3">Task Name</th>
                        <th class="px-6 py-3">Group</th>
                        <th class="px-6 py-3">Type</th>
                        <th class="px-6 py-3">Freq</th>
                        <th class="px-6 py-3 text-right">Budget (h)</th>
                        <th class="px-6 py-3">Manual</th>
                        <th class="px-6 py-3 text-center">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="bg-white border-b hover:bg-blue-50 transition">
                        <td class="px-6 py-4 font-medium">01</td>
                        <td class="px-6 py-4 font-bold text-gray-800">Vệ sinh quầy POS 1</td>
                        <td class="px-6 py-4"><span class="badge badge-green">DELICA</span></td>
                        <td class="px-6 py-4">Fixed</td>
                        <td class="px-6 py-4">Daily</td>
                        <td class="px-6 py-4 text-right font-mono text-blue-700 font-bold">0.50</td>
                        <td class="px-6 py-4 text-blue-500 underline cursor-pointer">DEL-001</td>
                        <td class="px-6 py-4 text-center">
                            <button class="text-blue-600 hover:text-blue-800 mr-3" onclick="openModal('modal-edit-task')"><i class="fa-solid fa-pen-to-square"></i></button>
                            <button class="text-red-500 hover:text-red-700"><i class="fa-solid fa-trash"></i></button>
                        </td>
                    </tr>
                    <tr class="bg-white border-b hover:bg-blue-50 transition">
                        <td class="px-6 py-4 font-medium">02</td>
                        <td class="px-6 py-4 font-bold text-gray-800">Kiểm kê hàng cuối ca</td>
                        <td class="px-6 py-4"><span class="badge badge-blue">D&D</span></td>
                        <td class="px-6 py-4">CTM</td>
                        <td class="px-6 py-4">Weekly</td>
                        <td class="px-6 py-4 text-right font-mono text-blue-700 font-bold">1.20</td>
                        <td class="px-6 py-4 text-blue-500 underline cursor-pointer">DD-052</td>
                        <td class="px-6 py-4 text-center">
                            <button class="text-blue-600 hover:text-blue-800 mr-3" onclick="openModal('modal-edit-task')"><i class="fa-solid fa-pen-to-square"></i></button>
                            <button class="text-red-500 hover:text-red-700"><i class="fa-solid fa-trash"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="px-6 py-4 border-t border-gray-200 flex justify-between items-center bg-gray-50">
            <span class="text-sm text-gray-500">Hiển thị 2 / 45 tasks</span>
            <div class="flex gap-1">
                <button class="px-3 py-1 border border-gray-300 rounded bg-white text-gray-500 text-sm">Trước</button>
                <button class="px-3 py-1 border border-blue-500 rounded bg-blue-500 text-white text-sm">1</button>
                <button class="px-3 py-1 border border-gray-300 rounded bg-white text-gray-500 text-sm">Sau</button>
            </div>
        </div>
    </div>


    <div id="modal-edit-task" class="modal-overlay">
        <div class="modal-content w-full max-w-3xl">
            <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-lg">
                <h3 class="text-lg font-bold text-gray-800">Chỉnh sửa RE Task</h3>
                <button onclick="closeModal('modal-edit-task')" class="text-gray-400 hover:text-gray-600 font-bold text-xl">&times;</button>
            </div>

            <div class="p-6 grid grid-cols-12 gap-4">
                <div class="col-span-4">
                    <label class="label">Group <span class="text-red-500">*</span></label>
                    <select class="input"><option>DELICA</option><option>D&D</option></select>
                </div>
                <div class="col-span-4">
                    <label class="label">Task Type <span class="text-red-500">*</span></label>
                    <select class="input"><option>Fixed</option><option>CTM</option></select>
                </div>
                <div class="col-span-4">
                    <label class="label">Task Name <span class="text-red-500">*</span></label>
                    <input type="text" class="input" value="Vệ sinh quầy POS 1">
                </div>

                <div class="col-span-12 border-t border-gray-100 my-2"></div>

                <div class="col-span-4">
                    <label class="label">Frequency Type <span class="text-red-500">*</span></label>
                    <select class="input"><option>Daily</option><option>Weekly</option></select>
                </div>
                <div class="col-span-4">
                    <label class="label">Freq Coeff (Auto)</label>
                    <input type="text" class="input bg-gray-100" value="1.0" disabled>
                </div>
                <div class="col-span-4">
                    <label class="label">Freq Count <span class="text-red-500">*</span></label>
                    <input type="number" class="input" value="1">
                </div>

                <div class="col-span-4">
                    <label class="label">RE Unit (min) <span class="text-red-500">*</span></label>
                    <input type="number" class="input" value="30">
                </div>
                <div class="col-span-4">
                    <label class="label">Store Parameter <span class="text-red-500">*</span></label>
                    <select class="input"><option>1 (Cố định)</option><option>CTM_Avg</option></select>
                </div>
                <div class="col-span-4">
                    <label class="label text-blue-600">Manhour Budget (h)</label>
                    <input type="text" class="input bg-blue-50 font-bold text-blue-700" value="0.50" disabled>
                </div>

                <div class="col-span-12 border-t border-gray-100 my-2"></div>

                <div class="col-span-12 md:col-span-6">
                    <label class="label">Task Position <span class="text-red-500">*</span></label>
                    <div class="flex">
                        <input type="text" class="input rounded-r-none bg-gray-50" value="Leader, POS Staff" readonly>
                        <button class="btn btn-secondary rounded-l-none border-l-0 hover:bg-gray-100">Chọn</button>
                    </div>
                </div>
                <div class="col-span-12 md:col-span-6">
                    <label class="label">Linked Task</label>
                    <div class="flex">
                        <input type="text" class="input rounded-r-none bg-gray-50" value="Không có liên kết" readonly>
                        <button class="btn btn-secondary rounded-l-none border-l-0 hover:bg-gray-100" onclick="openModal('modal-linked-task')">Chọn</button>
                    </div>
                </div>
                <div class="col-span-12">
                     <label class="label">Timeframe <span class="text-red-500">*</span></label>
                        <div class="flex">
                            <input type="text" class="input rounded-r-none bg-gray-50" value="05:00-06:00; 22:00-23:00" readonly>
                            <button class="btn btn-secondary rounded-l-none border-l-0 hover:bg-gray-100">Chọn</button>
                        </div>
                </div>

                 <div class="col-span-3">
                    <label class="label">Manual No</label>
                    <input type="text" class="input" value="DEL-001">
                </div>
                <div class="col-span-9">
                    <label class="label">Manual Link</label>
                    <input type="text" class="input" value="https://docs.company.com/del-001">
                </div>
                <div class="col-span-12">
                    <label class="label">Description</label>
                    <textarea class="input" rows="2" placeholder="Mô tả chi tiết..."></textarea>
                </div>
            </div>

            <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 rounded-b-lg">
                <button class="btn btn-secondary" onclick="closeModal('modal-edit-task')">Hủy bỏ</button>
                <button class="btn btn-primary" onclick="closeModal('modal-edit-task')">Cập nhật Task</button>
            </div>
        </div>
    </div>


    <div id="modal-linked-task" class="modal-overlay">
        <div class="modal-content w-full max-w-2xl">
             <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-lg">
                <h3 class="text-lg font-bold text-gray-800">Cấu hình Task Liên kết</h3>
                <button onclick="closeModal('modal-linked-task')" class="text-gray-400 hover:text-gray-600 font-bold text-xl">&times;</button>
            </div>
            
            <div class="p-6">
                <div class="bg-blue-50 border border-blue-200 text-blue-800 text-xs p-3 rounded mb-4">
                    <i class="fa-solid fa-circle-info mr-1"></i> Chỉ chọn loại liên kết cho các vị trí có liên quan đến task này.
                </div>

                <table class="w-full text-sm text-left text-gray-500 border border-gray-200 rounded overflow-hidden">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                        <tr>
                            <th class="px-4 py-3 border-b">Vị trí (Position)</th>
                            <th class="px-4 py-3 border-b text-center">Liên kết?</th>
                            <th class="px-4 py-3 border-b">Loại liên kết</th>
                            <th class="px-4 py-3 border-b">Task mục tiêu</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="bg-white border-b hover:bg-gray-50">
                            <td class="px-4 py-3 font-medium text-gray-900">Store Leader</td>
                            <td class="px-4 py-3 text-center"><input type="checkbox" checked class="w-4 h-4 text-blue-600 rounded"></td>
                            <td class="px-4 py-3">
                                <div class="flex flex-col gap-1 text-xs">
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="r1" checked class="mr-2"> Cùng làm</label>
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="r1" class="mr-2"> Làm thay thế</label>
                                </div>
                            </td>
                            <td class="px-4 py-3">
                                <select disabled class="input bg-gray-100 text-gray-400 py-1 text-xs"><option>-- Chính task này --</option></select>
                            </td>
                        </tr>
                        <tr class="bg-white border-b hover:bg-gray-50">
                            <td class="px-4 py-3 font-medium text-gray-900">POS Staff</td>
                            <td class="px-4 py-3 text-center"><input type="checkbox" class="w-4 h-4 text-blue-600 rounded"></td>
                            <td class="px-4 py-3 opacity-50">
                                 <div class="flex flex-col gap-1 text-xs">
                                    <label class="flex items-center"><input type="radio" name="r2" disabled class="mr-2"> Cùng làm</label>
                                    <label class="flex items-center"><input type="radio" name="r2" disabled class="mr-2"> Làm thay thế</label>
                                </div>
                            </td>
                            <td class="px-4 py-3">
                                <select disabled class="input bg-gray-100 py-1 text-xs"><option>Chọn Task...</option></select>
                            </td>
                        </tr>
                         <tr class="bg-white hover:bg-gray-50">
                            <td class="px-4 py-3 font-medium text-gray-900">Baker</td>
                            <td class="px-4 py-3 text-center"><input type="checkbox" checked class="w-4 h-4 text-blue-600 rounded"></td>
                            <td class="px-4 py-3">
                                 <div class="flex flex-col gap-1 text-xs">
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="r3" class="mr-2"> Cùng làm</label>
                                    <label class="flex items-center cursor-pointer"><input type="radio" name="r3" checked class="mr-2"> Làm thay thế</label>
                                </div>
                            </td>
                            <td class="px-4 py-3">
                                <select class="input py-1 text-xs"><option>Vệ sinh lò nướng (Baker)</option><option>Sắp xếp khay</option></select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3 rounded-b-lg">
                <button class="btn btn-secondary" onclick="closeModal('modal-linked-task')">Đóng</button>
                <button class="btn btn-primary" onclick="closeModal('modal-linked-task')">Lưu cấu hình</button>
            </div>
        </div>
    </div>

    <script>
        function openModal(modalID) {
            document.getElementById(modalID).classList.add('active');
        }

        function closeModal(modalID) {
            document.getElementById(modalID).classList.remove('active');
        }

        // Đóng modal khi click ra ngoài (Optional)
        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>