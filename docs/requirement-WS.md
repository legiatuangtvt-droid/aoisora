# TÃ€I LIá»†U PHÃ‚N TÃCH YÃŠU Cáº¦U - WS MODULE (Task from HQ)

> **Project**: AEON Task Management System
> **Module**: WS (Work Schedule - Task from HQ)
> **Version**: 1.0
> **Last Updated**: 2026-01-26

---

## 1. Má»¤C TIÃŠU Dá»° ÃN

### 1.1 Tá»•ng quan

Há»‡ thá»‘ng Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ chuáº©n hÃ³a vÃ  tá»‘i Æ°u hÃ³a viá»‡c quáº£n lÃ½ task, Ä‘iá»u phá»‘i nhÃ¢n lá»±c vÃ  giao viá»‡c tá»« trá»¥ sá»Ÿ chÃ­nh (HQ) xuá»‘ng cÃ¡c cá»­a hÃ ng thuá»™c há»‡ thá»‘ng AEON.

### 1.2 Má»¥c tiÃªu cá»¥ thá»ƒ

| # | Má»¥c tiÃªu | MÃ´ táº£ |
|---|----------|-------|
| 1 | Sá»‘ hÃ³a quy trÃ¬nh | Thay Ä‘á»•i phÆ°Æ¡ng thá»©c quáº£n lÃ½ thá»§ cÃ´ng (Email/Zalo/giáº¥y tá») sang ká»¹ thuáº­t sá»‘ |
| 2 | Giao viá»‡c chÃ­nh xÃ¡c | Äáº£m báº£o task Ä‘Æ°á»£c giao Ä‘Ãºng bá»™ pháº­n, Ä‘Ãºng ngÆ°á»i, Ä‘Ãºng thá»i Ä‘iá»ƒm |
| 3 | Theo dÃµi tiáº¿n Ä‘á»™ | GiÃ¡m sÃ¡t real-time tiáº¿n Ä‘á»™ thá»±c hiá»‡n task táº¡i cÃ¡c cá»­a hÃ ng |
| 4 | ÄÃ¡nh giÃ¡ hiá»‡u suáº¥t | Äo lÆ°á»ng thá»i gian thá»±c hiá»‡n, tá»· lá»‡ hoÃ n thÃ nh, lÃ½ do unable |
| 5 | TÃ¡i sá»­ dá»¥ng template | LÆ°u trá»¯ task máº«u Ä‘á»ƒ dispatch nhiá»u láº§n |
| 6 | Quy trÃ¬nh phÃª duyá»‡t | Äáº£m báº£o task Ä‘Æ°á»£c kiá»ƒm duyá»‡t trÆ°á»›c khi giao cho stores |

### 1.3 Pháº¡m vi Ã¡p dá»¥ng

- **Äá»‘i tÆ°á»£ng**: 6 phÃ²ng ban chÃ­nh (OP, Admin, Control, Improvement, Planning, HR)
- **Cáº¥p báº­c**: Tá»« HQ (G2-G9) Ä‘áº¿n nhÃ¢n viÃªn cá»­a hÃ ng (S1-S7)
- **Äá»‹a lÃ½**: Táº¥t cáº£ stores trong há»‡ thá»‘ng AEON Viá»‡t Nam

### 1.4 Thiáº¿t bá»‹ sá»­ dá»¥ng

| Äá»‘i tÆ°á»£ng | Thiáº¿t bá»‹ chÃ­nh | Ghi chÃº |
|-----------|----------------|---------|
| **HQ** | Web (Desktop/Laptop) | Sá»­ dá»¥ng trÃ¬nh duyá»‡t trÃªn mÃ¡y tÃ­nh |
| **Store** | iPad / Mobile | Má»—i Store Ä‘Æ°á»£c cáº¥p 01 iPad dÃ¹ng chung |

> **LÆ°u Ã½**:
> - HQ chá»§ yáº¿u sá»­ dá»¥ng báº£n **Web** Ä‘á»ƒ quáº£n lÃ½ vÃ  theo dÃµi task
> - Store chá»§ yáº¿u sá»­ dá»¥ng báº£n **iPad/Mobile** Ä‘á»ƒ nháº­n vÃ  thá»±c hiá»‡n task
> - iPad lÃ  thiáº¿t bá»‹ chÃ­nh táº¡i Store (dÃ¹ng chung cho cáº£ team)
> - Giao diá»‡n cáº§n tá»‘i Æ°u cho cáº£ 2 ná»n táº£ng (Responsive Web + Mobile-first cho Store)

> **LÆ°u Ã½**: CÆ¡ cáº¥u phÃ²ng ban cÃ³ thá»ƒ thay Ä‘á»•i trong quÃ¡ trÃ¬nh váº­n hÃ nh vÃ  tá»• chá»©c.

---

## 2. Äá»ŠNH NGHÄ¨A THUáº¬T NGá»®

### 2.1 CÆ¡ cáº¥u tá»• chá»©c

| # | Thuáº­t ngá»¯ | PhÃ¢n loáº¡i | Giáº£i thÃ­ch |
|---|-----------|-----------|------------|
| 1 | **HQ** | Tá»• chá»©c | Headquarters - Trá»¥ sá»Ÿ chÃ­nh |
| 2 | **Store** | Tá»• chá»©c | Cá»­a hÃ ng/SiÃªu thá»‹ |
| 3 | **Region** | Äá»‹a lÃ½ | VÃ¹ng (cáº¥p cao nháº¥t) |
| 4 | **Zone** | Äá»‹a lÃ½ | Khu vá»±c trong Region |
| 5 | **Area** | Äá»‹a lÃ½ | Quáº­n/Huyá»‡n trong Zone |
| 6 | **Division** | Tá»• chá»©c HQ | Khá»‘i (cáº¥p cao nháº¥t táº¡i HQ) |
| 7 | **Department (Dept)** | Tá»• chá»©c | PhÃ²ng ban |

> **LÆ°u Ã½**: KhÃ¡i niá»‡m "Team" vÃ  "Dept" trong thá»±c táº¿ lÃ  ngang cáº¥p nhau, chá»‰ khÃ¡c cÃ¡ch gá»i. Trong app chá»§ yáº¿u sá»­ dá»¥ng thuáº­t ngá»¯ **Dept** vÃ  **Div** (Division).

### 2.2 Departments (PhÃ²ng ban)

> **LÆ°u Ã½**: ÄÃ¢y lÃ  cÆ¡ cáº¥u phÃ²ng ban ban Ä‘áº§u, cÃ³ thá»ƒ thay Ä‘á»•i trong quÃ¡ trÃ¬nh váº­n hÃ nh.

| # | Code | TÃªn Ä‘áº§y Ä‘á»§ | PhÃ¢n loáº¡i | Ghi chÃº |
|---|------|------------|-----------|---------|
| 1 | **OP** | Operations | Parent | Váº­n hÃ nh - cÃ³ 5 divisions con |
| 2 | PERI | Perishable | OP Division | Thá»±c pháº©m tÆ°Æ¡i sá»‘ng |
| 3 | GRO | Grocery | OP Division | Táº¡p hÃ³a |
| 4 | Delica | Delicatessen | OP Division | Thá»±c pháº©m cháº¿ biáº¿n |
| 5 | D&D | Dry & Daily | OP Division | HÃ ng khÃ´ |
| 6 | CS | Customer Service | OP Division | Dá»‹ch vá»¥ khÃ¡ch hÃ ng |
| 7 | **Admin** | Administration | Parent | HÃ nh chÃ­nh |
| 8 | MMD | Merchandise Management | Admin Division | Quáº£n lÃ½ hÃ ng hÃ³a |
| 9 | ACC | Accounting | Admin Division | Káº¿ toÃ¡n |
| 10 | **Control** | Control | Department | Kiá»ƒm soÃ¡t |
| 11 | **Improvement** | Improvement | Department | Cáº£i tiáº¿n |
| 12 | **Planning** | Planning | Parent | Káº¿ hoáº¡ch |
| 13 | MKT | Marketing | Planning Division | Marketing |
| 14 | SPA | Space Allocation | Planning Division | Bá»‘ trÃ­ khÃ´ng gian |
| 15 | ORD | Ordering | Planning Division | Äáº·t hÃ ng |
| 16 | **HR** | Human Resources | Department | NhÃ¢n sá»± |

### 2.3 Job Grades (Cáº¥p báº­c)

#### Admin System

| Role | MÃ´ táº£ | Quyá»n háº¡n |
|------|-------|-----------|
| **Admin System** | Quáº£n trá»‹ viÃªn há»‡ thá»‘ng | Full permission cao nháº¥t trong toÃ n bá»™ system, quáº£n lÃ½ users, cáº¥u hÃ¬nh há»‡ thá»‘ng |

#### HQ Grades (G2-G9)

| Grade | TÃªn | MÃ´ táº£ |
|-------|-----|-------|
| G9 | GD | General Director - Tá»•ng GiÃ¡m Ä‘á»‘c |
| G8 | CCO | Chief Commercial Officer |
| G7 | Senior General Manager | Quáº£n lÃ½ cáº¥p cao |
| G6 | General Manager | Tá»•ng quáº£n lÃ½ |
| G5 | Manager | Quáº£n lÃ½ |
| G4 | Deputy Manager | PhÃ³ quáº£n lÃ½ |
| G3 | Executive | ChuyÃªn viÃªn |
| G2 | Officer | NhÃ¢n viÃªn |

**Quyá»n háº¡n chung:**
- **Táº¡o task**: Táº¥t cáº£ G2-G9 Ä‘á»u cÃ³ thá»ƒ táº¡o task
- **Duyá»‡t task**: Grade cao hÆ¡n duyá»‡t task cho grade tháº¥p hÆ¡n thuá»™c quyá»n quáº£n lÃ½ trá»±c tiáº¿p
- **G9 (GD)**: KhÃ´ng cáº§n cáº¥p trÃªn duyá»‡t vÃ¬ Ä‘Ã£ lÃ  cáº¥p cao nháº¥t

#### Store Grades (S1-S7)

| Grade | TÃªn | MÃ´ táº£ | Quyá»n háº¡n chÃ­nh |
|-------|-----|-------|-----------------|
| S7 | Region Manager | Quáº£n lÃ½ vÃ¹ng | Xem táº¥t cáº£ stores trong Region |
| S6 | Zone Manager | Quáº£n lÃ½ khu vá»±c | Xem táº¥t cáº£ stores trong Zone |
| S5 | Area Manager | Quáº£n lÃ½ quáº­n | Xem táº¥t cáº£ stores trong Area |
| S4 | SI (Store In-charge) | Phá»¥ trÃ¡ch 2+ stores | Giao viá»‡c cho S1, thá»±c hiá»‡n task |
| S3 | Store Leader | Quáº£n lÃ½ 1 store | Giao viá»‡c cho S1, thá»±c hiá»‡n task |
| S2 | Deputy Store Leader | PhÃ³ Store Leader | Giao viá»‡c cho S1, thá»±c hiá»‡n task |
| S1 | Staff | NhÃ¢n viÃªn cá»­a hÃ ng | Thá»±c hiá»‡n task Ä‘Æ°á»£c giao |

### 2.4 Task Statuses

#### Task Status (Tráº¡ng thÃ¡i tá»•ng thá»ƒ - HQ View)

| Status | TÃªn hiá»ƒn thá»‹ | MÃ u | Äiá»u kiá»‡n |
|--------|--------------|-----|-----------|
| `draft` | Draft | Gray | Báº£n nhÃ¡p chÆ°a submit |
| `approve` | Approve | Purple | Äang chá» phÃª duyá»‡t |
| `not_yet` | Not Yet | Yellow | Táº¥t cáº£ stores chÆ°a báº¯t Ä‘áº§u |
| `on_progress` | On Progress | Green | CÃ³ store Ä‘ang thá»±c hiá»‡n |
| `overdue` | Overdue | Red | end_date < today vÃ  chÆ°a done |
| `done` | Done | Blue | Táº¥t cáº£ stores hoÃ n thÃ nh |

#### Store Status (Tráº¡ng thÃ¡i tá»«ng store)

| Status | TÃªn hiá»ƒn thá»‹ | MÃ u | Äiá»u kiá»‡n |
|--------|--------------|-----|-----------|
| `not_yet` | Not Yet | Gray | ChÆ°a báº¯t Ä‘áº§u (default) |
| `on_progress` | On Progress | Blue | Äang thá»±c hiá»‡n |
| `done_pending` | Done Pending | Yellow | HoÃ n thÃ nh, chá» HQ check |
| `done` | Done | Green | HQ Ä‘Ã£ xÃ¡c nháº­n OK |
| `unable` | Unable | Orange | KhÃ´ng thá»ƒ thá»±c hiá»‡n |
| `overdue` | Overdue | Red | QuÃ¡ háº¡n (system auto) |

#### HQ Check Status (Tráº¡ng thÃ¡i kiá»ƒm tra cá»§a HQ)

| Status | TÃªn hiá»ƒn thá»‹ | MÃ u | Äiá»u kiá»‡n |
|--------|--------------|-----|-----------|
| `not_yet` | Not Yet | Gray | CÃ³ store Ä‘ang chá» check (cÃ³ done_pending) |
| `done` | Done | Green | KhÃ´ng cÃ²n store nÃ o Ä‘ang done_pending |

### 2.5 Thuáº­t ngá»¯ nghiá»‡p vá»¥

| # | Thuáº­t ngá»¯ | Giáº£i thÃ­ch |
|---|-----------|------------|
| 1 | **Library** | ThÆ° viá»‡n task máº«u (templates) Ä‘á»ƒ dÃ¹ng láº¡i |
| 2 | **Dispatch** | Gá»­i template tá»« Library Ä‘áº¿n stores |
| 3 | **Cooldown** | Thá»i gian chá» sau khi dispatch (trÃ¡nh gá»­i trÃ¹ng) |
| 4 | **HQ Check** | HQ xÃ¡c nháº­n káº¿t quáº£ thá»±c hiá»‡n cá»§a store |
| 5 | **Scope** | Pháº¡m vi giao task (Region/Zone/Area/Store) |
| 6 | **Approver** | NgÆ°á»i cÃ³ quyá»n phÃª duyá»‡t task |
| 7 | **Evidence** | Báº±ng chá»©ng hoÃ n thÃ nh (áº£nh, tÃ i liá»‡u) |
| 8 | **Task Type** | Loáº¡i task: Daily, Weekly, Monthly, Quarterly, Yearly |

---

## 3. YÃŠU Cáº¦U NGHIá»†P Vá»¤

### 3.1 Flow hiá»‡n táº¡i (AS-IS)

| # | NhÃ¢n váº­t | Ká»‹ch báº£n | Váº¥n Ä‘á» |
|---|----------|----------|--------|
| 1 | HQ Staff | Gá»­i yÃªu cáº§u (Task) xuá»‘ng Store qua Email/Zalo hoáº·c giáº¥y tá» | KhÃ´ng track Ä‘Æ°á»£c, dá»… tháº¥t láº¡c |
| 2 | Store Leader | Ghi nháº­n task báº±ng báº£ng Excel hoáº·c báº£ng tráº¯ng | KhÃ³ theo dÃµi tiáº¿n Ä‘á»™ |
| 3 | Store Staff | Thá»±c hiá»‡n task, bÃ¡o cÃ¡o báº±ng lá»i nÃ³i/tin nháº¯n | KhÃ´ng cÃ³ evidence |
| 4 | HQ Manager | Tá»•ng há»£p bÃ¡o cÃ¡o thá»§ cÃ´ng tá»« nhiá»u nguá»“n | Máº¥t thá»i gian, dá»… sai sÃ³t |
| 5 | All | KhÃ´ng cÃ³ quy trÃ¬nh phÃª duyá»‡t chuáº©n | Task cÃ³ thá»ƒ khÃ´ng phÃ¹ há»£p |

### 3.2 Flow mong muá»‘n (TO-BE)

#### SÆ¡ Ä‘á»“ tá»•ng quan luá»“ng Task (Complete Task Status Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETE TASK STATUS FLOW (ADD TASK â†’ DONE)                                               â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  GIAI ÄOáº N 1: Táº O TASK (HQ thao tÃ¡c)                                                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚       FLOW 1                     FLOW 2                     FLOW 3                         â”‚
â”‚    (Task HQâ†’Store)           (Template Task)             (Task HQâ†’HQ)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Button Add New     â”‚    â”‚  Button Add New     â”‚    â”‚  Button Add New     â”‚             â”‚
â”‚  â”‚  táº¡i Task List      â”‚    â”‚  táº¡i Library Task   â”‚    â”‚  táº¡i To do Task     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                        â–¼                                                   â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                          â”‚     SCREEN: ADD TASK     â”‚                                      â”‚
â”‚                          â”‚  (CÃ¹ng 1 screen cho cáº£   â”‚                                      â”‚
â”‚                          â”‚   3 flows, khÃ¡c params)  â”‚                                      â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                    â”‚                  â”‚                  â”‚                                 â”‚
â”‚                 [Cancel]              â”‚            [Save as Draft]                         â”‚
â”‚                    â”‚                  â”‚                  â”‚                                 â”‚
â”‚                    â–¼                  â”‚                  â–¼                                 â”‚
â”‚               (Há»§y, khÃ´ng             â–¼            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                 táº¡o task)         [Submit]â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   DRAFT   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                                       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚               â”‚
â”‚                                       â–¼                  â–²                 â”‚               â”‚
â”‚                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                 â”‚               â”‚
â”‚                                 â”‚  APPROVE  â”œâ”€ [Reject] â”€â”˜                 â”‚               â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                              â”‚               â”‚
â”‚                                   Approved                                 â”‚               â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚               â”‚
â”‚             â–¼                         â–¼                         â–¼          â”‚               â”‚
â”‚          FLOW 1                    FLOW 2                    FLOW 3        â”‚               â”‚
â”‚      (Task HQâ†’Store)           (Template Task)            (Task HQâ†’HQ)     â”‚               â”‚
â”‚             â”‚                         â”‚                         â”‚          â”‚               â”‚
â”‚             â”‚                         â–¼                         â”‚          â”‚               â”‚
â”‚             â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚          â”‚               â”‚
â”‚             â”œâ”€â”€â”€ LÆ°u Library â”€â”€â–ºâ”‚ AVAILABLE â”‚â—„â”€â”€ LÆ°u Library â”€â”€â”€â”¤          â”‚               â”‚
â”‚             â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚          â”‚               â”‚
â”‚             â”‚                     (dispatch)                    â”‚          â”‚               â”‚
â”‚             â”‚                         â”‚                         â”‚          â”‚               â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€ Gá»­i Stores â”€â”€â”€â”€â–ºâ”¼â—„â”€â”€â”€â”€â”€ Gá»­i Dep/Team â”€â”€â”€â”€â”€â”˜          â”‚               â”‚
â”‚                                       â”‚                                    â”‚               â”‚
â”‚                                       â”œâ”€â”€â”€â–º [Pause] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                       â”‚                                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  GIAI ÄOáº N 2: THá»°C HIá»†N TASK          â”‚(Store/HQ thá»±c hiá»‡n - HQ verify)                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                       â–¼                                                    â”‚
â”‚                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚                                â”‚   NOT YET   â”‚â—„â”€â”€ TASK STATUS (Ã­t nháº¥t 01 stores = not_yet)â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                                    â”‚                         â”‚     ON PROGRESS    â”‚     â”‚
â”‚  â”‚                                    â–¼                         â”‚ (Ã­t nháº¥t 1 store   â”‚     â”‚
â”‚  â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  Ä‘ang thá»±c hiá»‡n)   â”‚     â”‚
â”‚  â”‚                             â”‚   not_yet   â”‚â—„â”€â”€ store status  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                       â”‚     â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚     â”‚
â”‚  â”‚         â–¼                          â–¼                          â–¼                   â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚     â”‚
â”‚  â”‚  â”‚   unable    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ on_progress â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   overdue   â”‚            â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚     â”‚
â”‚  â”‚                                â–²   â”‚                          â”‚                   â”‚     â”‚
â”‚  â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                          â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚                  â–¼                          â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚           â”‚done_pending â”‚                   â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚                  â–¼                          â”‚                   â”‚     â”‚
â”‚  â”‚                 â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚     â”‚
â”‚  â”‚                 â””â”€ Reject â”€â”€â”¤  HQ CHECK   â”‚                   â”‚                   â”‚     â”‚
â”‚  â”‚                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚     â”‚
â”‚  â”‚                                 Checked                       â”‚                   â”‚     â”‚
â”‚  â”‚                                    â”‚                          â”‚                   â”‚     â”‚
â”‚  â”‚                                    â–¼                          â”‚                   â”‚     â”‚
â”‚  â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                   â”‚     â”‚
â”‚  â”‚                             â”‚    done     â”‚                   â”‚                   â”‚     â”‚
â”‚  â”‚                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚                   â”‚     â”‚
â”‚  â”‚                                    â–¼                          â”‚                   â”‚     â”‚
â”‚  â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                   â”‚     â”‚
â”‚  â”‚                        â”‚ System check conditions â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚     â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                          â–¼                         â–¼                                       â”‚
â”‚                    Táº¥t cáº£ stores             CÃ³ báº¥t ká»³ store                               â”‚
â”‚                   = done hoáº·c unable           = overdue                                   â”‚
â”‚                  (unable Ä‘áº¿m riÃªng)                â”‚                                       â”‚
â”‚                          â”‚                         â”‚                                       â”‚
â”‚                          â–¼                         â–¼                                       â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                     â”‚   DONE   â”‚              â”‚ OVERDUE  â”‚                                 â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ LEGEND (ChÃº thÃ­ch)                                                                     â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ SCREEN ADD TASK: Cáº£ 3 flows Ä‘á»u má»Ÿ cÃ¹ng 1 screen Add Task (khÃ¡c params/context)         â”‚
â”‚  â€¢ DRAFT lÃ  OPTIONAL: Chá»‰ táº¡o khi user click [Save as Draft]                               â”‚
â”‚    - Click [Submit] trá»±c tiáº¿p â†’ Äi tháº³ng tá»›i APPROVE (bá» qua DRAFT)                        â”‚
â”‚    - Click [Save as Draft] â†’ Táº¡o DRAFT â†’ Sau Ä‘Ã³ Submit tá»« Draft â†’ APPROVE                  â”‚
â”‚  â€¢ TASK STATUS (UPPERCASE): DRAFT, APPROVE, NOT YET, ON PROGRESS, DONE, OVERDUE            â”‚
â”‚    â†’ Tráº¡ng thÃ¡i tá»•ng thá»ƒ cá»§a task, tÃ­nh tá»« tá»•ng há»£p táº¥t cáº£ store statuses                  â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ Store status (lowercase) - 6 tráº¡ng thÃ¡i:                                                â”‚
â”‚    â†’ not_yet: Store chÆ°a báº¯t Ä‘áº§u thá»±c hiá»‡n                                                 â”‚
â”‚    â†’ on_progress: Store Ä‘ang thá»±c hiá»‡n task                                                â”‚
â”‚    â†’ done_pending: Store bÃ¡o hoÃ n thÃ nh, chá» HQ kiá»ƒm tra                                   â”‚
â”‚    â†’ done (confirmed): HQ Ä‘Ã£ xÃ¡c nháº­n OK                                                   â”‚
â”‚    â†’ unable: Store khÃ´ng thá»ƒ thá»±c hiá»‡n (chá»n tá»« on_progress hoáº·c not_yet)                  â”‚
â”‚    â†’ overdue: Store quÃ¡ háº¡n (today > end_date mÃ  status = not_yet hoáº·c on_progress)        â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ HQ CHECK cÃ³ 2 actions:                                                                  â”‚
â”‚    â†’ Checked (OK): done_pending â†’ done (confirmed)                                         â”‚
â”‚    â†’ Reject: done_pending â†’ on_progress (yÃªu cáº§u lÃ m láº¡i)                                  â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ OVERDUE RULES (System auto):                                                            â”‚
â”‚    â†’ not_yet + today > end_date â†’ overdue                                                  â”‚
â”‚    â†’ on_progress + today > end_date â†’ overdue                                              â”‚
â”‚    â†’ done_pending + today > end_date â†’ done (AUTO CONFIRM - lá»—i HQ khÃ´ng check ká»‹p)        â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ PAUSE (Táº¡m dá»«ng task):                                                                  â”‚
â”‚    â†’ Chá»‰ APPROVER cÃ³ quyá»n pause (khÃ´ng pháº£i Creator)                                      â”‚
â”‚    â†’ Ãp dá»¥ng khi: Task Ä‘Ã£ gá»­i vá» stores (NOT YET, ON PROGRESS)                             â”‚
â”‚    â†’ LÃ½ do: PhÃ¡t hiá»‡n task cÃ³ váº¥n Ä‘á», nguy cÆ¡ unable cao                                   â”‚
â”‚    â†’ Káº¿t quáº£: Task quay vá» status APPROVE, xÃ³a táº¥t cáº£ store assignments                    â”‚
â”‚    â†’ Library mark: ÄÃ¡nh dáº¥u task tÆ°Æ¡ng á»©ng trong Library lÃ  "had_issues"                   â”‚
â”‚    â†’ Táº¡i APPROVE: Approver cÃ³ thá»ƒ Sá»¬A thÃ´ng tin task                                       â”‚
â”‚    â†’ Sau khi sá»­a: Approver cÃ³ thá»ƒ Approve láº¡i Ä‘á»ƒ gá»­i vá» stores                             â”‚
â”‚                                                                                            â”‚
â”‚  â€¢ Receiver = Store (Flow 1) hoáº·c HQ User (Flow 3)                                         â”‚
â”‚  â€¢ Flow 2: Template lÆ°u AVAILABLE â†’ dispatch sau â†’ theo Flow 1 hoáº·c 3                      â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ KEY DIFFERENCES GIá»®A 3 FLOWS:                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚                â”‚ FLOW 1          â”‚ FLOW 2          â”‚ FLOW 3                  â”‚          â”‚
â”‚  â”‚                â”‚ (Task HQâ†’Store) â”‚ (Template Task) â”‚ (Task HQâ†’HQ)            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ Má»¥c Ä‘Ã­ch       â”‚ HQ giao task    â”‚ Táº¡o template    â”‚ HQ giao task cho        â”‚          â”‚
â”‚  â”‚                â”‚ cho Stores      â”‚ dÃ¹ng láº¡i        â”‚ HQ users khÃ¡c           â”‚          â”‚
â”‚  â”‚ Entry Point    â”‚ Task List       â”‚ Library Task    â”‚ To do List              â”‚          â”‚
â”‚  â”‚ Receiver       â”‚ Stores          â”‚ (chá»n khi       â”‚ HQ Users                â”‚          â”‚
â”‚  â”‚                â”‚                 â”‚  dispatch)      â”‚                         â”‚          â”‚
â”‚  â”‚ C. Scope       â”‚ Required        â”‚ Hidden          â”‚ Required                â”‚          â”‚
â”‚  â”‚ After Approve  â”‚ (1) Gá»­i Stores  â”‚ AVAILABLE       â”‚ (1) Gá»­i HQ users        â”‚          â”‚
â”‚  â”‚                â”‚ (2) LÆ°u Library â”‚ (chá» dispatch)  â”‚ (2) LÆ°u Library         â”‚          â”‚
â”‚  â”‚ Draft Limit    â”‚ 5 per user      â”‚ 5 per user      â”‚ 5 per user              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ RECEIVER STATUS VALUES & TRANSITIONS:                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ STATUS              â”‚ MÃ” Táº¢                                                  â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ not_yet             â”‚ ChÆ°a báº¯t Ä‘áº§u (máº·c Ä‘á»‹nh khi task Ä‘Æ°á»£c giao)             â”‚          â”‚
â”‚  â”‚ on_progress         â”‚ Äang thá»±c hiá»‡n                                         â”‚          â”‚
â”‚  â”‚ done_pending        â”‚ Receiver bÃ¡o done, CHá»œ HQ confirm                      â”‚          â”‚
â”‚  â”‚ done                â”‚ HQ Ä‘Ã£ confirm, hoÃ n thÃ nh THáº¬T Sá»°                      â”‚          â”‚
â”‚  â”‚ unable              â”‚ KhÃ´ng thá»ƒ thá»±c hiá»‡n (cÃ³ lÃ½ do)                         â”‚          â”‚
â”‚  â”‚ overdue             â”‚ QuÃ¡ háº¡n (end_date < today)                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ CHUYá»‚N Äá»”I          â”‚ TRIGGER                                                â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ not_yet â†’           â”‚ Receiver báº¯t Ä‘áº§u thá»±c hiá»‡n task                        â”‚          â”‚
â”‚  â”‚ on_progress         â”‚                                                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ on_progress â†’       â”‚ Receiver click "Mark as Done" + upload evidence        â”‚          â”‚
â”‚  â”‚ done_pending        â”‚ â†’ Chá» HQ confirm                                       â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ done_pending â†’      â”‚ HQ CHECK: click "Checked" (OK)                         â”‚          â”‚
â”‚  â”‚ done                â”‚                                                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ done_pending â†’      â”‚ HQ CHECK: click "Reject" â†’ yÃªu cáº§u lÃ m láº¡i             â”‚          â”‚
â”‚  â”‚ on_progress         â”‚                                                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ on_progress â†’       â”‚ Receiver click "Unable" + nháº­p lÃ½ do (required)        â”‚          â”‚
â”‚  â”‚ unable              â”‚                                                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ not_yet â†’ overdue   â”‚ SYSTEM AUTO: today > end_date (chÆ°a báº¯t Ä‘áº§u)           â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ on_progress â†’       â”‚ SYSTEM AUTO: today > end_date (Ä‘ang lÃ m dá»Ÿ)            â”‚          â”‚
â”‚  â”‚ overdue             â”‚                                                        â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ done_pending â†’      â”‚ SYSTEM AUTO: today > end_date (HQ khÃ´ng check ká»‹p)     â”‚          â”‚
â”‚  â”‚ done (auto confirm) â”‚ â†’ Auto confirm vÃ¬ lá»—i HQ, store Ä‘Ã£ hoÃ n thÃ nh          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ TASK STATUS CALCULATION (Auto tá»« Receiver Statuses):                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚  THá»¨ Tá»° Æ¯U TIÃŠN: overdue > not_yet > on_progress > done                                   â”‚
â”‚                                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ TASK STATUS         â”‚ ÄIá»€U KIá»†N (System check conditions)                    â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚ OVERDUE             â”‚ CÃ³ Báº¤T Ká»² receiver = overdue                           â”‚          â”‚
â”‚  â”‚ NOT YET             â”‚ CÃ³ Báº¤T Ká»² receiver = not_yet, VÃ€ khÃ´ng cÃ³ overdue      â”‚          â”‚
â”‚  â”‚ ON PROGRESS         â”‚ ÃT NHáº¤T 1 receiver = on_progress/done_pending,         â”‚          â”‚
â”‚  â”‚                     â”‚ VÃ€ khÃ´ng cÃ³ overdue, VÃ€ khÃ´ng cÃ³ not_yet               â”‚          â”‚
â”‚  â”‚ DONE                â”‚ Táº¤T Cáº¢ receivers = done hoáº·c unable (unable Ä‘áº¿m riÃªng)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                                            â”‚
â”‚  ğŸ“Œ VÃ Dá»¤ (Task giao cho 3 receivers: A, B, C):                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Case 1: A=not_yet, B=not_yet, C=not_yet         â†’ TASK = NOT YET               â”‚       â”‚
â”‚  â”‚ Case 2: A=on_progress, B=not_yet, C=not_yet     â†’ TASK = NOT YET (cÃ³ not_yet)  â”‚       â”‚
â”‚  â”‚ Case 3: A=done_pending, B=not_yet, C=not_yet    â†’ TASK = NOT YET (cÃ³ not_yet)  â”‚       â”‚
â”‚  â”‚ Case 4: A=done, B=done_pending, C=on_progress   â†’ TASK = ON PROGRESS           â”‚       â”‚
â”‚  â”‚ Case 5: A=done, B=done, C=unable                â†’ TASK = DONE âœ“                â”‚       â”‚
â”‚  â”‚ Case 6: A=done, B=done, C=done_pending          â†’ TASK = ON PROGRESS (chá» HQ)  â”‚       â”‚
â”‚  â”‚ Case 7: A=done, B=on_progress, C=overdue        â†’ TASK = OVERDUE âš ï¸            â”‚       â”‚
â”‚  â”‚ Case 8: A=done, B=done, C=overdue               â†’ TASK = OVERDUE âš ï¸            â”‚       â”‚
â”‚  â”‚ Case 9: A=done, B=not_yet, C=overdue            â†’ TASK = OVERDUE âš ï¸            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                                            â”‚
â”‚  ğŸ“Œ VÃ Dá»¤ OVERDUE AUTO (khi today > end_date):                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Before: A=not_yet      â†’ After: A=overdue (store chÆ°a báº¯t Ä‘áº§u)                 â”‚       â”‚
â”‚  â”‚ Before: A=on_progress  â†’ After: A=overdue (store Ä‘ang lÃ m dá»Ÿ)                  â”‚       â”‚
â”‚  â”‚ Before: A=done_pending â†’ After: A=done (AUTO CONFIRM - lá»—i HQ khÃ´ng check ká»‹p) â”‚       â”‚
â”‚  â”‚ Before: A=done         â†’ After: A=done (giá»¯ nguyÃªn - Ä‘Ã£ hoÃ n thÃ nh)            â”‚       â”‚
â”‚  â”‚ Before: A=unable       â†’ After: A=unable (giá»¯ nguyÃªn - Ä‘Ã£ káº¿t thÃºc)            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ FINAL RESULT COUNTERS (Bá»™ Ä‘áº¿m káº¿t quáº£ cuá»‘i cÃ¹ng):                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚    Khi task hoÃ n thÃ nh (status = DONE hoáº·c OVERDUE), káº¿t quáº£ hiá»ƒn thá»‹ qua 2 bá»™ Ä‘áº¿m:       â”‚
â”‚                                                                                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚  1ï¸âƒ£ UNABLE COUNTER (Bá»™ Ä‘áº¿m Unable)                                               â”‚     â”‚
â”‚    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚    â”‚  â€¢ Hiá»ƒn thá»‹: Sá»‘ nguyÃªn (vÃ­ dá»¥: 5)                                               â”‚     â”‚
â”‚    â”‚  â€¢ Ã nghÄ©a: Sá»‘ stores Ä‘Ã£ bÃ¡o "unable" (khÃ´ng thá»ƒ thá»±c hiá»‡n)                     â”‚     â”‚
â”‚    â”‚  â€¢ Bá»™ Ä‘áº¿m riÃªng biá»‡t, khÃ´ng náº±m trong done counter                              â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â”‚  2ï¸âƒ£ DONE COUNTER (Bá»™ Ä‘áº¿m Done)                                                   â”‚     â”‚
â”‚    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚    â”‚  â€¢ Hiá»ƒn thá»‹: X/Y format (vÃ­ dá»¥: 24/27)                                          â”‚     â”‚
â”‚    â”‚  â€¢ X = Sá»‘ stores Ä‘Ã£ done (confirmed)                                            â”‚     â”‚
â”‚    â”‚  â€¢ Y = Tá»•ng sá»‘ stores cÃ²n láº¡i (Total - unable)                                  â”‚     â”‚
â”‚    â”‚  â€¢ Y - X = Sá»‘ stores overdue (chÆ°a hoÃ n thÃ nh khi háº¿t háº¡n)                      â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                            â”‚
â”‚    ğŸ“Š VÃ Dá»¤:                                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚  Task giao cho 32 stores, káº¿t quáº£ cuá»‘i cÃ¹ng:                                    â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚    â”‚  â”‚  done   â”‚  24/27  â”‚  24 stores done, 27 tá»•ng cÃ²n láº¡i, 3 overdue (27-24=3) â”‚  â”‚     â”‚
â”‚    â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚     â”‚
â”‚    â”‚  â”‚  unable â”‚    5    â”‚  5 stores bÃ¡o unable (riÃªng biá»‡t)                     â”‚  â”‚     â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â”‚  ğŸ“Œ CÃCH TÃNH:                                                                  â”‚     â”‚
â”‚    â”‚     â†’ Total stores assigned = 32                                                â”‚     â”‚
â”‚    â”‚     â†’ 5 stores bÃ¡o unable â†’ unable counter = 5                                  â”‚     â”‚
â”‚    â”‚     â†’ CÃ²n láº¡i 27 stores (32 - 5) Ä‘Æ°á»£c track trong done counter                  â”‚     â”‚
â”‚    â”‚     â†’ Trong 27 stores Ä‘Ã³: 24 done, 3 overdue                                    â”‚     â”‚
â”‚    â”‚     â†’ done counter hiá»ƒn thá»‹: 24/27                                              â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â”‚  âœ… FORMULA:                                                                     â”‚     â”‚
â”‚    â”‚     Total = done + overdue + unable                                             â”‚     â”‚
â”‚    â”‚     32    = 24   + 3       + 5                                                  â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â”‚     done counter: X/Y                                                           â”‚     â”‚
â”‚    â”‚     â†’ Y = Total - unable = 32 - 5 = 27                                          â”‚     â”‚
â”‚    â”‚     â†’ X = sá»‘ stores done = 24                                                   â”‚     â”‚
â”‚    â”‚     â†’ overdue = Y - X = 27 - 24 = 3                                             â”‚     â”‚
â”‚    â”‚                                                                                 â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ HQ CHECK FLOW:                                                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚    Receiver bÃ¡o done             HQ CHECK                 Checked â†’ done (confirmed)       â”‚
â”‚    (done_pending)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  (kiá»ƒm tra)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Reject â†’ on_progress (lÃ m láº¡i)  â”‚
â”‚                                                                                            â”‚
â”‚    â€¢ Receiver click "Mark as Done" â†’ status = done_pending                                 â”‚
â”‚    â€¢ HQ nháº­n notification vá» receiver cáº§n kiá»ƒm tra                                         â”‚
â”‚    â€¢ HQ vÃ o Task Detail â†’ xem evidence cá»§a receiver Ä‘Ã³                                     â”‚
â”‚    â€¢ HQ cÃ³ 2 actions:                                                                      â”‚
â”‚      â†’ "Checked" (OK): receiver status = done (confirmed)                                  â”‚
â”‚      â†’ "Reject": receiver status = on_progress (yÃªu cáº§u lÃ m láº¡i)                           â”‚
â”‚    â€¢ AUTO CONFIRM: Náº¿u today > end_date mÃ  status = done_pending                           â”‚
â”‚      â†’ System tá»± Ä‘á»™ng chuyá»ƒn done_pending â†’ done (lá»—i HQ khÃ´ng check ká»‹p)                  â”‚
â”‚    â€¢ Khi Táº¤T Cáº¢ receivers = done hoáº·c unable â†’ TASK = DONE (unable Ä‘áº¿m riÃªng)              â”‚
â”‚    â€¢ Náº¿u cÃ³ Báº¤T Ká»² receiver = overdue â†’ TASK = OVERDUE                                     â”‚
â”‚                                                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  ğŸ“Œ PAUSE FLOW (Táº¡m dá»«ng task):                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                            â”‚
â”‚    Task Ä‘ang thá»±c hiá»‡n          Approver PAUSE            Task quay vá» APPROVE             â”‚
â”‚    (NOT YET/ON PROGRESS) â”€â”€â”€â”€â”€â–º (táº¡m dá»«ng task) â”€â”€â”€â”€â”€â”€â”€â”€â–º (Approver cÃ³ thá»ƒ sá»­a)           â”‚
â”‚                                                                                            â”‚
â”‚    ğŸ“‹ ÄIá»€U KIá»†N PAUSE:                                                                     â”‚
â”‚    â€¢ Task status = NOT YET hoáº·c ON PROGRESS                                                â”‚
â”‚    â€¢ ChÆ°a cÃ³ store nÃ o = done hoáº·c done_pending                                            â”‚
â”‚    â€¢ Chá»‰ APPROVER cÃ³ quyá»n (khÃ´ng pháº£i Creator)                                            â”‚
â”‚                                                                                            â”‚
â”‚    ğŸ”„ KHI PAUSE:                                                                           â”‚
â”‚    â€¢ Task status: NOT YET/ON PROGRESS â†’ APPROVE                                            â”‚
â”‚    â€¢ XÃ³a táº¥t cáº£ store assignments (reset vá» tráº¡ng thÃ¡i chÆ°a giao)                          â”‚
â”‚    â€¢ Mark Library: ÄÃ¡nh dáº¥u task tÆ°Æ¡ng á»©ng trong Library lÃ  "had_issues"                   â”‚
â”‚      (Ä‘á»ƒ cáº£nh bÃ¡o khi dispatch láº¡i trong tÆ°Æ¡ng lai)                                        â”‚
â”‚    â€¢ Notify stores Ä‘ang thá»±c hiá»‡n: "Task [name] Ä‘Ã£ bá»‹ táº¡m dá»«ng"                            â”‚
â”‚    â€¢ Notify Creator: "Task [name] Ä‘Ã£ bá»‹ Approver táº¡m dá»«ng Ä‘á»ƒ Ä‘iá»u chá»‰nh"                   â”‚
â”‚                                                                                            â”‚
â”‚    âœï¸ Táº I APPROVE (sau khi Pause):                                                         â”‚
â”‚    â€¢ Approver cÃ³ thá»ƒ Sá»¬A thÃ´ng tin task (A. Information, B. Instructions, C. Scope)        â”‚
â”‚    â€¢ LÃ½ do: Approver chá»‹u trÃ¡ch nhiá»‡m vá» tÃ­nh kháº£ thi, khÃ´ng pháº£i Creator                  â”‚
â”‚    â€¢ Sau khi sá»­a xong: Approver click "Approve" Ä‘á»ƒ gá»­i láº¡i vá» stores                       â”‚
â”‚                                                                                            â”‚
â”‚    âš ï¸ KHÃ”NG THá»‚ PAUSE KHI:                                                                 â”‚
â”‚    â€¢ CÃ³ Ã­t nháº¥t 1 store = done_pending (Ä‘ang chá» HQ check)                                 â”‚
â”‚    â€¢ CÃ³ Ã­t nháº¥t 1 store = done (Ä‘Ã£ hoÃ n thÃ nh)                                             â”‚
â”‚    â€¢ Task status = DONE hoáº·c OVERDUE                                                       â”‚
â”‚                                                                                            â”‚
â”‚    ğŸ“š LIBRARY "HAD_ISSUES" FLAG:                                                           â”‚
â”‚    â€¢ Khi task bá»‹ Pause, task tÆ°Æ¡ng á»©ng trong Library Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u had_issues = true       â”‚
â”‚    â€¢ Hiá»ƒn thá»‹ warning icon âš ï¸ trong Library list                                           â”‚
â”‚    â€¢ Khi dispatch task cÃ³ had_issues, hiá»ƒn thá»‹ cáº£nh bÃ¡o:                                   â”‚
â”‚      "This task template was paused before due to issues. Review carefully before sending."â”‚
â”‚                                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.1 Ba luá»“ng táº¡o Task

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  THREE CREATION FLOWS                                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FLOW 1: Task HQ â†’ Store                                   â”‚  â”‚
â”‚  â”‚ Entry: Task List > Add New                                â”‚  â”‚
â”‚  â”‚ Receiver: Stores (S1-S7)                                  â”‚  â”‚
â”‚  â”‚ Scope: Region > Zone > Area > Store                       â”‚  â”‚
â”‚  â”‚ After Approve: Gá»­i Stores + LÆ°u Library                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FLOW 2: Template Task                                     â”‚  â”‚
â”‚  â”‚ Entry: Library > Add New                                  â”‚  â”‚
â”‚  â”‚ Receiver: Chá»n khi dispatch                               â”‚  â”‚
â”‚  â”‚ Scope: Hidden (chá»n khi dispatch)                         â”‚  â”‚
â”‚  â”‚ After Approve: LÆ°u Library (Available)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FLOW 3: Task HQ â†’ HQ                                      â”‚  â”‚
â”‚  â”‚ Entry: To Do Task > Add New                               â”‚  â”‚
â”‚  â”‚ Receiver: HQ Users (cÃ¹ng Dept/Team)                       â”‚  â”‚
â”‚  â”‚ Scope: Division > Dept > Team > User                      â”‚  â”‚
â”‚  â”‚ After Approve: Gá»­i HQ Users + LÆ°u Library                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 Scenario chi tiáº¿t

| # | Level | NhÃ¢n váº­t | Ká»‹ch báº£n | MÃ n hÃ¬nh liÃªn quan |
|---|-------|----------|----------|-------------------|
| 1 | G2-G9 | HQ Creator | ÄÄƒng nháº­p â†’ Task List â†’ Add New â†’ Äiá»n thÃ´ng tin â†’ Chá»n Stores â†’ Submit | Login, Task List, Add New |
| 2 | G3-G9 | HQ Approver | ÄÄƒng nháº­p â†’ Nháº­n notification â†’ Task List â†’ Add New (Approval mode) â†’ Review â†’ Approve/Reject | Login, Task List, Add New |
| 3 | S2-S4 | Store Leader | ÄÄƒng nháº­p â†’ Nháº­n notification â†’ Task List (Store view) â†’ Task Detail â†’ Assign cho Staff hoáº·c tá»± lÃ m | Login, Task List, Task Detail |
| 4 | S1 | Store Staff | ÄÄƒng nháº­p â†’ Nháº­n notification â†’ Task List (Staff view) â†’ Task Detail â†’ Upload evidence â†’ Mark Done | Login, Task List, Task Detail |
| 5 | G2-G9 | HQ Checker | ÄÄƒng nháº­p â†’ Nháº­n notification â†’ Task List (HQ Check filter) â†’ Task Detail â†’ Xem evidence â†’ Checked/Reject | Login, Task List, Task Detail |
| 6 | G2-G9 | HQ Creator | ÄÄƒng nháº­p â†’ Library â†’ Add New â†’ Äiá»n thÃ´ng tin template â†’ Submit | Login, Library, Add New |
| 7 | G3-G9 | HQ Approver | ÄÄƒng nháº­p â†’ Nháº­n notification â†’ Library â†’ Add New (Approval mode) â†’ Review â†’ Approve â†’ Available | Login, Library, Add New |
| 8 | G2-G9 | HQ User | ÄÄƒng nháº­p â†’ Library â†’ Chá»n template (Available) â†’ Add New â†’ Chá»n Scope â†’ Gá»­i | Login, Library, Add New |

---

## 4. PHÃ‚N QUYá»€N CHI TIáº¾T

### 4.1 Matrix phÃ¢n quyá»n theo chá»©c nÄƒng

| Chá»©c nÄƒng | G9 | G8 | G7 | G6 | G5 | G4 | G3 | G2 | S7-S5 | S4-S2 | S1 |
|-----------|----|----|----|----|----|----|----|----|-------|-------|-----|
| Táº¡o Task | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ |
| Duyá»‡t Task | âœ… | âœ… | âœ… | âœ… | âœ… | âœ…* | âœ…* | âŒ | âŒ | âŒ | âŒ |
| Xem Task List (HQ) | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ |
| Xem Store Tasks | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ…** | âœ… | âœ…*** |
| Giao viá»‡c cho S1 | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| Thá»±c hiá»‡n Task | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ…*** |
| HQ Check | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ |
| Override Cooldown | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| Pause Task | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |

**Ghi chÃº:**
- *Duyá»‡t task cá»§a cáº¥p dÆ°á»›i trá»±c tiáº¿p
- **Xem tasks trong scope quáº£n lÃ½ (Region/Zone/Area)
- ***Chá»‰ tasks Ä‘Æ°á»£c assign cho há»

### 4.2 Logic xÃ¡c Ä‘á»‹nh Approver

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPROVER LOOKUP ALGORITHM                                      â”‚
â”‚                                                                 â”‚
â”‚  1. Láº¥y team_id, department_id, job_grade cá»§a Creator          â”‚
â”‚  2. TÃ¬m user trong CÃ™NG TEAM cÃ³ job_grade > Creator             â”‚
â”‚     â†’ Náº¿u tÃ¬m tháº¥y: Chá»n ngÆ°á»i cÃ³ MIN(job_grade) = Approver    â”‚
â”‚  3. Náº¿u KHÃ”NG tÃ¬m tháº¥y trong Team:                              â”‚
â”‚     â†’ TÃ¬m trong CÃ™NG DEPARTMENT cÃ³ job_grade > Creator          â”‚
â”‚     â†’ Náº¿u tÃ¬m tháº¥y: Chá»n ngÆ°á»i cÃ³ MIN(job_grade) = Approver    â”‚
â”‚  4. Náº¿u váº«n KHÃ”NG tÃ¬m tháº¥y:                                     â”‚
â”‚     â†’ TÃ¬m lÃªn parent organizational unit (Division/Sector)     â”‚
â”‚  5. FALLBACK: System Admin hoáº·c designated approval account    â”‚
â”‚                                                                 â”‚
â”‚  VÃ Dá»¤:                                                         â”‚
â”‚  â€¢ G2 táº¡o task, Team cÃ³ G3 â†’ Approver = G3                      â”‚
â”‚  â€¢ G3 táº¡o task, Team cÃ³ G4 â†’ Approver = G4                      â”‚
â”‚  â€¢ G3 táº¡o task, Team KHÃ”NG cÃ³ G4, G5 â†’ Approver = G6 (Dept Head)â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. DANH SÃCH MÃ€N HÃŒNH

### 5.1 Screen List

| # | Screen Code | Screen Name | Route | MÃ´ táº£ | NgÆ°á»i dÃ¹ng |
|---|-------------|-------------|-------|-------|------------|
| 1 | SCR-001 | Login | /auth/signin | ÄÄƒng nháº­p há»‡ thá»‘ng | All |
| 2 | SCR-002 | Task List | /tasks/list | Danh sÃ¡ch task vá»›i filter, search, pagination | HQ + Store |
| 3 | SCR-003 | Task Detail | /tasks/detail | Chi tiáº¿t task, statistics, store progress | HQ + Store |
| 4 | SCR-004 | Add Task | /tasks/new | Táº¡o/sá»­a task (3 flows) | HQ (G2-G9) |
| 5 | SCR-005 | Approval | /tasks/approval | Danh sÃ¡ch task chá» duyá»‡t | HQ (Approver) |
| 6 | SCR-006 | Library | /tasks/library | Quáº£n lÃ½ task templates | HQ |
| 7 | SCR-007 | Dispatch | /tasks/library/dispatch | Gá»­i template Ä‘áº¿n stores | HQ |
| 8 | SCR-008 | To Do Task | /tasks/todo | Task HQ giao cho HQ | HQ |
| 9 | SCR-009 | Store Tasks | /stores/[id]/tasks | Task cá»§a store | Store (S1-S7) |
| 10 | SCR-010 | HQ Check | /tasks/hq-check | XÃ¡c nháº­n káº¿t quáº£ store | HQ |
| 11 | SCR-011 | User Info | /tasks/info | ThÃ´ng tin cÃ¡ nhÃ¢n | All |
| 12 | SCR-012 | Store Info | /tasks/store-info | ThÃ´ng tin store | Store |
| 13 | SCR-013 | Messages | /tasks/messages | Tin nháº¯n/comment | All |
| 14 | SCR-014 | Report | /tasks/report | BÃ¡o cÃ¡o thá»‘ng kÃª | HQ |

### 5.2 Screen Details Summary

#### SCR-002: Task List

| ThÃ nh pháº§n | MÃ´ táº£ |
|------------|-------|
| **Header** | Title, Add New button |
| **Filters** | Department (multi-select), Status (multi-select), Search by name |
| **Table** | No, Dept, Task Group, Task Name, Status, Progress, Unable, HQ Check, Actions |
| **Features** | Expand/collapse sub-tasks, Click status â†’ History modal, 3-dots menu |
| **Pagination** | Page selector, items per page |

#### SCR-004: Add Task

| Section | ThÃ nh pháº§n |
|---------|------------|
| **A. Information** | Task Name, Task Type, Applicable Period (Start-End), RE Time |
| **B. Instructions** | Instruction Type (Image/Document), Manual Link, Note, Photo Guidelines |
| **C. Scope** | Store: Region > Zone > Area > Store; HQ: Division > Dept > Team > User |
| **D. Approval Process** | Auto-display approver info |
| **Actions** | Save as Draft, Submit |

#### SCR-009: Store Tasks

| ThÃ nh pháº§n | MÃ´ táº£ |
|------------|-------|
| **Task List** | Tasks assigned to this store |
| **Actions** | Start, Complete (with evidence), Mark Unable (with reason), Assign to Staff |
| **Filters** | Status, My Tasks only |

---

## 6. WORKFLOW DIAGRAMS

### 6.1 Complete Task Status Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLETE TASK STATUS FLOW (ADD TASK â†’ DONE)                                   â”‚
â”‚                                                                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  GIAI ÄOáº N 1: Táº O TASK (HQ thao tÃ¡c)                                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                                                                â”‚
â”‚       FLOW 1                     FLOW 2                     FLOW 3             â”‚
â”‚    (Task HQâ†’Store)           (Template Task)             (Task HQâ†’HQ)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Button Add New     â”‚    â”‚  Button Add New     â”‚    â”‚  Button Add New     â”‚ â”‚
â”‚  â”‚  táº¡i Task List      â”‚    â”‚  táº¡i Library Task   â”‚    â”‚  táº¡i To do Task     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                        â–¼                                       â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                          â”‚     SCREEN: ADD TASK     â”‚                          â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚                  â”‚                  â”‚                     â”‚
â”‚                 [Cancel]              â”‚            [Save as Draft]             â”‚
â”‚                    â”‚                  â”‚                  â”‚                     â”‚
â”‚                    â–¼                  â”‚                  â–¼                     â”‚
â”‚               (Há»§y, khÃ´ng             â–¼            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                 táº¡o task)         [Submit]â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚   DRAFT   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚                                       â–¼                  â–²                 â”‚   â”‚
â”‚                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                 â”‚   â”‚
â”‚                                 â”‚  APPROVE  â”œâ”€ [Reject] â”€â”˜                 â”‚   â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                              â”‚   â”‚
â”‚                                   Approved                                 â”‚   â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚             â–¼                         â–¼                         â–¼          â”‚   â”‚
â”‚          FLOW 1                    FLOW 2                    FLOW 3        â”‚   â”‚
â”‚             â”‚                         â”‚                         â”‚          â”‚   â”‚
â”‚             â”‚                         â–¼                         â”‚          â”‚   â”‚
â”‚             â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚          â”‚   â”‚
â”‚             â”œâ”€â”€â”€ LÆ°u Library â”€â”€â–ºâ”‚ AVAILABLE â”‚â—„â”€â”€ LÆ°u Library â”€â”€â”€â”¤          â”‚   â”‚
â”‚             â”‚                   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚          â”‚   â”‚
â”‚             â”‚                     (dispatch)                    â”‚          â”‚   â”‚
â”‚             â”‚                         â”‚                         â”‚          â”‚   â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€ Gá»­i Stores â”€â”€â”€â”€â–ºâ”¼â—„â”€â”€â”€â”€â”€ Gá»­i Dep/Team â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚                                       â”‚                                    â”‚   â”‚
â”‚                                       â”œâ”€â”€â”€â–º [Pause] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚  GIAI ÄOáº N 2: THá»°C HIá»†N TASK          â”‚(Store/HQ thá»±c hiá»‡n - HQ verify)        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚
â”‚                                       â–¼                                        â”‚
â”‚                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                                â”‚   NOT YET   â”‚â—„â”€â”€ TASK STATUS                  â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                       â”‚                                        â”‚
â”‚                                       â–¼                                        â”‚
â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                             â”‚    STORE/USER   â”‚                                â”‚
â”‚                             â”‚   EXECUTION     â”‚                                â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                      â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                    â–¼                 â–¼                 â–¼                       â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚             â”‚on_progressâ”‚     â”‚done_pendingâ”‚    â”‚  unable   â”‚                  â”‚
â”‚             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                   â”‚                 â”‚                                          â”‚
â”‚                   â”‚                 â–¼                                          â”‚
â”‚                   â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                   â”‚          â”‚ HQ CHECK  â”‚                                     â”‚
â”‚                   â”‚          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                   â”‚       Checked  â”‚  Reject                                   â”‚
â”‚                   â”‚          â–¼     â””â”€â”€â”€â”€â–º on_progress                          â”‚
â”‚                   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚                   â””â”€â”€â”€â–ºâ”‚   done    â”‚                                           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                              â”‚                                                 â”‚
â”‚                              â–¼                                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                   â”‚ System check conditions â”‚                                  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚                  â–¼                         â–¼                                   â”‚
â”‚            Táº¥t cáº£ stores             CÃ³ báº¥t ká»³ store                           â”‚
â”‚           = done hoáº·c unable           = overdue                               â”‚
â”‚                  â”‚                         â”‚                                   â”‚
â”‚                  â–¼                         â–¼                                   â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚             â”‚   DONE   â”‚              â”‚ OVERDUE  â”‚                             â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Store Status Transitions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STORE STATUS TRANSITIONS                                       â”‚
â”‚                                                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚         â”‚ not_yet  â”‚ â† Default khi task Ä‘Æ°á»£c assign             â”‚
â”‚         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚              â”‚                                                  â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚      â”‚               â”‚                                          â”‚
â”‚      â–¼               â–¼                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚ â”‚on_progressâ”‚   â”‚  unable  â”‚ â† KhÃ´ng thá»ƒ lÃ m tá»« Ä‘áº§u             â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚      â”‚               â–²                                          â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚ â”‚done_pendingâ”‚ â† Store bÃ¡o done, chá» HQ check                   â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚ â”‚   done   â”‚ â† HQ Ä‘Ã£ confirm OK                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                                                                 â”‚
â”‚  âœ… ALLOWED TRANSITIONS:                                        â”‚
â”‚     â€¢ not_yet â†’ on_progress (Báº¯t Ä‘áº§u lÃ m)                       â”‚
â”‚     â€¢ not_yet â†’ unable (KhÃ´ng thá»ƒ lÃ m ngay tá»« Ä‘áº§u)              â”‚
â”‚     â€¢ on_progress â†’ done_pending (BÃ¡o hoÃ n thÃ nh)               â”‚
â”‚     â€¢ on_progress â†’ unable (KhÃ´ng thá»ƒ hoÃ n thÃ nh)               â”‚
â”‚     â€¢ done_pending â†’ done (HQ Checked OK)                       â”‚
â”‚     â€¢ done_pending â†’ on_progress (HQ Reject)                    â”‚
â”‚                                                                 â”‚
â”‚  âŒ FORBIDDEN TRANSITIONS:                                      â”‚
â”‚     â€¢ done â†’ ANY (ÄÃ£ hoÃ n thÃ nh, khÃ´ng thá»ƒ Ä‘á»•i)                 â”‚
â”‚     â€¢ unable â†’ ANY (ÄÃ£ káº¿t thÃºc, khÃ´ng thá»ƒ Ä‘á»•i)                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 HQ Check Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HQ CHECK FLOW                                                  â”‚
â”‚                                                                 â”‚
â”‚    Store bÃ¡o done             HQ CHECK                          â”‚
â”‚    (done_pending)  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  (kiá»ƒm tra evidence)            â”‚
â”‚                                       â”‚                         â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                          â–¼                         â–¼            â”‚
â”‚                    [Checked OK]              [Reject]           â”‚
â”‚                          â”‚                         â”‚            â”‚
â”‚                          â–¼                         â–¼            â”‚
â”‚                   done (confirmed)           on_progress        â”‚
â”‚                                              (lÃ m láº¡i)          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Œ AUTO CONFIRM:                                                â”‚
â”‚     â€¢ Náº¿u today > end_date mÃ  status = done_pending             â”‚
â”‚     â€¢ System tá»± Ä‘á»™ng chuyá»ƒn done_pending â†’ done                 â”‚
â”‚     â€¢ LÃ½ do: Lá»—i HQ khÃ´ng check ká»‹p, store Ä‘Ã£ hoÃ n thÃ nh        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. BUSINESS RULES

### 7.1 Draft Rules

| Rule | MÃ´ táº£ | GiÃ¡ trá»‹ |
|------|-------|---------|
| Draft Limit | Sá»‘ draft tá»‘i Ä‘a má»—i user má»—i flow | 5 drafts |
| Draft Auto-Delete | XÃ³a draft náº¿u khÃ´ng edit trong X ngÃ y | 30 ngÃ y |
| Draft Expiry Warning | Cáº£nh bÃ¡o trÆ°á»›c khi xÃ³a | 5 ngÃ y trÆ°á»›c |

### 7.2 Approval Rules

| Rule | MÃ´ táº£ | GiÃ¡ trá»‹ |
|------|-------|---------|
| Max Rejections | Sá»‘ láº§n reject tá»‘i Ä‘a | 3 láº§n |
| Must Edit After Reject | Pháº£i sá»­a Ã­t nháº¥t 1 field trÆ°á»›c khi submit láº¡i | Báº¯t buá»™c |
| After 3 Rejections | Chá»‰ cÃ³ thá»ƒ xÃ³a task | KhÃ´ng submit Ä‘Æ°á»£c |

### 7.3 Library & Dispatch Rules

| Rule | MÃ´ táº£ |
|------|-------|
| Auto-Save to Library | Khi task Ä‘Æ°á»£c approve, tá»± Ä‘á»™ng lÆ°u vÃ o Library |
| Cooldown Trigger | Khi dispatch cÃ¹ng template + cÃ¹ng stores + cÃ¹ng period |
| Cooldown Duration | Tá»« start_date Ä‘áº¿n end_date cá»§a task Ä‘Ã£ dispatch |
| Override Cooldown | Chá»‰ Dept/Team Head (highest grade) cÃ³ quyá»n |

### 7.4 Overdue Rules

| Rule | MÃ´ táº£ |
|------|-------|
| Overdue Detection | end_date < today VÃ€ status khÃ´ng pháº£i done |
| Auto Check | System cháº¡y daily hoáº·c on-demand |
| Auto Confirm | done_pending + overdue â†’ done (auto confirm) |

### 7.5 Task Type Hierarchy

| Parent Task Type | Child Options Available |
|------------------|------------------------|
| Yearly | Yearly, Quarterly, Monthly, Weekly, Daily |
| Quarterly | Quarterly, Monthly, Weekly, Daily |
| Monthly | Monthly, Weekly, Daily |
| Weekly | Weekly, Daily |
| Daily | Daily only |

---

## 8. API ENDPOINTS SUMMARY

### 8.1 Authentication APIs

| # | Method | Endpoint | MÃ´ táº£ |
|---|--------|----------|-------|
| 1 | POST | /api/v1/auth/login | ÄÄƒng nháº­p |
| 2 | POST | /api/v1/auth/logout | ÄÄƒng xuáº¥t |
| 3 | POST | /api/v1/auth/refresh | LÃ m má»›i token |
| 4 | GET | /api/v1/auth/me | Láº¥y thÃ´ng tin user hiá»‡n táº¡i |
| 5 | POST | /api/v1/auth/forgot-password | QuÃªn máº­t kháº©u |
| 6 | POST | /api/v1/auth/verify-code | XÃ¡c thá»±c mÃ£ OTP |
| 7 | POST | /api/v1/auth/reset-password | Äáº·t láº¡i máº­t kháº©u |

### 8.2 Task Management APIs

| # | Method | Endpoint | MÃ´ táº£ |
|---|--------|----------|-------|
| 1 | GET | /api/v1/tasks | Danh sÃ¡ch tasks |
| 2 | GET | /api/v1/tasks/{id} | Chi tiáº¿t task |
| 3 | POST | /api/v1/tasks | Táº¡o task/draft |
| 4 | PUT | /api/v1/tasks/{id} | Cáº­p nháº­t draft |
| 5 | DELETE | /api/v1/tasks/{id} | XÃ³a draft |
| 6 | POST | /api/v1/tasks/{id}/submit | Submit for approval |
| 7 | POST | /api/v1/tasks/{id}/approve | Approve task |
| 8 | POST | /api/v1/tasks/{id}/reject | Reject task |
| 9 | GET | /api/v1/tasks/pending-approval | Tasks chá» duyá»‡t |
| 10 | GET | /api/v1/tasks/{id}/progress | Tiáº¿n Ä‘á»™ task |
| 11 | GET | /api/v1/tasks/{id}/history | Lá»‹ch sá»­ approval |

### 8.3 Store Execution APIs

| # | Method | Endpoint | MÃ´ táº£ |
|---|--------|----------|-------|
| 1 | GET | /api/v1/stores/{id}/tasks | Tasks cá»§a store |
| 2 | GET | /api/v1/stores/{id}/tasks/my | Tasks Ä‘Æ°á»£c assign cho user |
| 3 | POST | /api/v1/tasks/{id}/stores/{store_id}/start | Báº¯t Ä‘áº§u task |
| 4 | POST | /api/v1/tasks/{id}/stores/{store_id}/complete | HoÃ n thÃ nh task |
| 5 | POST | /api/v1/tasks/{id}/stores/{store_id}/unable | ÄÃ¡nh dáº¥u unable |
| 6 | POST | /api/v1/tasks/{id}/stores/{store_id}/assign | Giao viá»‡c cho staff |
| 7 | POST | /api/v1/tasks/{id}/stores/{store_id}/check | HQ check |
| 8 | POST | /api/v1/tasks/{id}/stores/{store_id}/reject | HQ reject |

### 8.4 Library APIs

| # | Method | Endpoint | MÃ´ táº£ |
|---|--------|----------|-------|
| 1 | GET | /api/v1/library-tasks | Danh sÃ¡ch templates |
| 2 | POST | /api/v1/library-tasks | Táº¡o template |
| 3 | PUT | /api/v1/library-tasks/{id} | Cáº­p nháº­t template |
| 4 | DELETE | /api/v1/library-tasks/{id} | XÃ³a template |
| 5 | POST | /api/v1/library-tasks/{id}/dispatch | Dispatch to stores |
| 6 | POST | /api/v1/library-tasks/{id}/override-cooldown | Override cooldown |

### 8.5 Supporting APIs

| # | Method | Endpoint | MÃ´ táº£ |
|---|--------|----------|-------|
| 1 | GET | /api/v1/departments | Danh sÃ¡ch departments |
| 2 | GET | /api/v1/scope-hierarchy | Region/Zone/Area/Store |
| 3 | GET | /api/v1/hq-hierarchy | Division/Dept/Team |
| 4 | GET | /api/v1/staff/{id}/approver | TÃ¬m approver cá»§a user |
| 5 | GET | /api/v1/code-master | Task types, categories |

---

## 9. VALIDATION RULES

### 9.1 Add Task - Save as Draft

| Field | Validation |
|-------|------------|
| Task Name | Required, not empty |

### 9.2 Add Task - Submit

| Section | Field | Validation |
|---------|-------|------------|
| A. Information | Task Name | Required |
| A. Information | Task Type | Required |
| A. Information | Applicable Period | Required (Flow 1, 3), Hidden (Flow 2) |
| A. Information | RE Time | Required |
| B. Instructions | Instruction Type | Required (Image/Document) |
| B. Instructions | Manual Link | Required, valid URL |
| B. Instructions | Note | Required if Type=Document |
| B. Instructions | Photo Guidelines | Min 1 photo if Type=Image, max 20, JPG/PNG, max 5MB |
| C. Scope | Store/HQ Selection | Required (Flow 1, 3), Hidden (Flow 2) |

---

## 10. TEST SCENARIOS

### 10.1 Authentication

| # | Test Case | Ká»‹ch báº£n | Expected |
|---|-----------|----------|----------|
| 1 | Login success | Nháº­p Ä‘Ãºng username/password | Redirect to dashboard |
| 2 | Login fail | Nháº­p sai password | Hiá»ƒn thá»‹ error message |
| 3 | Logout | Click logout | Redirect to login, token invalid |

### 10.2 Task Creation

| # | Test Case | Ká»‹ch báº£n | Expected |
|---|-----------|----------|----------|
| 1 | Create draft | Äiá»n Task Name, click Save Draft | Task saved vá»›i status=draft |
| 2 | Draft limit | Táº¡o draft thá»© 6 | Hiá»ƒn thá»‹ error "Draft limit reached" |
| 3 | Submit task | Äiá»n Ä‘áº§y Ä‘á»§, click Submit | Task chuyá»ƒn status=approve |
| 4 | Validation error | Submit thiáº¿u required fields | Hiá»ƒn thá»‹ validation errors |

### 10.3 Approval Flow

| # | Test Case | Ká»‹ch báº£n | Expected |
|---|-----------|----------|----------|
| 1 | Approve task | Approver click Approve | Task status=not_yet, gá»­i vá» stores |
| 2 | Reject task | Approver click Reject, nháº­p reason | Task status=draft, notify creator |
| 3 | Reject 3 times | Reject láº§n thá»© 3 | Task bá»‹ khÃ³a, chá»‰ cÃ³ thá»ƒ xÃ³a |

### 10.4 Store Execution

| # | Test Case | Ká»‹ch báº£n | Expected |
|---|-----------|----------|----------|
| 1 | Start task | Store click Start | Store status=on_progress |
| 2 | Complete task | Upload evidence, click Complete | Store status=done_pending |
| 3 | Mark unable | Click Unable, nháº­p reason | Store status=unable |
| 4 | Assign to staff | S3 assign task cho S1 | S1 tháº¥y task trong My Tasks |

### 10.5 HQ Check

| # | Test Case | Ká»‹ch báº£n | Expected |
|---|-----------|----------|----------|
| 1 | HQ Check OK | HQ click Checked | Store status=done |
| 2 | HQ Reject | HQ click Reject, nháº­p reason | Store status=on_progress |
| 3 | Auto confirm | Task overdue + done_pending | Store status=done (auto) |

---

## 11. RELATED DOCUMENTS

| Document | Path | MÃ´ táº£ |
|----------|------|-------|
| Basic Specs | docs/specs/basic/ | Tá»•ng quan tá»«ng screen |
| Detail Specs | docs/specs/detail/ | Chi tiáº¿t ká»¹ thuáº­t |
| API Specs | docs/specs/api/ | API contracts |
| Database Design | docs/database/ | Schema design |
| Deployment Guide | docs/06-deployment/ | HÆ°á»›ng dáº«n deploy |

---

## 12. CHANGELOG

| Date | Version | Changes | Author |
|------|---------|---------|--------|
| 2026-01-26 | 1.0 | Initial requirement document | Claude Code |

---

> **Note**: TÃ i liá»‡u nÃ y Ä‘Æ°á»£c táº¡o dá»±a trÃªn thiáº¿t káº¿ trong CLAUDE.md vÃ  code Ä‘Ã£ implement. CÃ¡c thay Ä‘á»•i requirements cáº§n Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»“ng thá»i vÃ o cáº£ file nÃ y vÃ  CLAUDE.md.
