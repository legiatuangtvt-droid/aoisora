<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="logo.png" type="image/png"> 
    <title>Lịch Hàng Tháng - AoiSora</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="output.css">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="style.css"> <!-- Giữ lại style riêng của trang này -->
</head>
<body class="flex h-screen text-gray-800">

    <!-- Sidebar Placeholder -->
    <div id="sidebar-placeholder"></div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header Placeholder -->
        <div id="header-placeholder">
             <div id="month-navigation" class="flex items-center space-x-4 text-xl font-bold">
                <button id="prev-month" class="text-gray-500 hover:text-gray-800"><i class="fas fa-chevron-left"></i></button>
                <h2 id="current-month-year">Tháng 10 2025</h2>
                <button id="next-month" class="text-gray-500 hover:text-gray-800"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="flex items-center space-x-6">
                 <a href="#" class="text-gray-600 hover:text-green-600"><i class="fas fa-user-check mr-2"></i>Xác nhận</a>
                <a href="#" class="text-gray-600 hover:text-green-600"><i class="fas fa-clipboard-check mr-2"></i>Kiểm tra</a>
                <a href="#" class="text-gray-600 hover:text-green-600 relative">
                    <i class="fas fa-bell"></i>
                    <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
                </a>
                <div class="flex items-center">
                    <img class="w-9 h-9 rounded-full object-cover" src="https://placehold.co/40x40/E2E8F0/4A5568?text=AV" alt="User Avatar">
                    <span class="ml-3 font-semibold">J. Manager</span>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <main class="flex-1 overflow-auto p-6 bg-white">
            <div class="bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
                <!-- Calendar Header -->
                <div class="calendar-grid bg-gray-200">
                    <div class="p-3 text-center font-semibold text-gray-600">Thứ Hai</div>
                    <div class="p-3 text-center font-semibold text-gray-600">Thứ Ba</div>
                    <div class="p-3 text-center font-semibold text-gray-600">Thứ Tư</div>
                    <div class="p-3 text-center font-semibold text-gray-600">Thứ Năm</div>
                    <div class="p-3 text-center font-semibold text-gray-600">Thứ Sáu</div>
                    <div class="p-3 text-center font-semibold text-gray-600 text-blue-600">Thứ Bảy</div>
                    <div class="p-3 text-center font-semibold text-gray-600 text-red-600">Chủ Nhật</div>
                </div>
                <!-- Calendar Body -->
                <div id="calendar-body" class="calendar-grid bg-gray-200">
                    <!-- Calendar days will be generated by JavaScript here -->
                </div>
            </div>
        </main>
    </div>

    <script src="layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Sample Data ---
            const shifts = {
                'Ca Sáng': { time: '06-14h', color: 'bg-blue-100 text-blue-800' },
                'Ca Chiều': { time: '14-22h', color: 'bg-orange-100 text-orange-800' },
                'Ca Đêm': { time: '22-06h', color: 'bg-indigo-100 text-indigo-800' },
                'Cả Ngày': { time: '08-17h', color: 'bg-green-100 text-green-800' },
                'Nghỉ': { time: 'OFF', color: 'bg-gray-100 text-gray-800' },
            };
            
            // Generate more diverse sample data
            const employeeNames = ['V.An', 'T.Bình', 'L.Cường', 'P.Dung', 'H.Giang', 'Đ.Hải', 'V.Hưng', 'B.Kim'];
            const shiftTypes = Object.keys(shifts);
            const scheduleData = {};

            for (let day = 1; day <= 31; day++) {
                const dateStr = `2025-10-${String(day).padStart(2, '0')}`;
                scheduleData[dateStr] = [];
                const shuffledEmployees = [...employeeNames].sort(() => 0.5 - Math.random());
                for(let i = 0; i < 5 + Math.floor(Math.random() * 4); i++) { // Assign 5-8 employees per day
                     scheduleData[dateStr].push({
                        name: shuffledEmployees[i],
                        shift: shiftTypes[Math.floor(Math.random() * shiftTypes.length)]
                     });
                }
            }

            // --- Calendar Logic ---
            const calendarBody = document.getElementById('calendar-body');
            const currentMonthYearEl = document.getElementById('current-month-year');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');

            let currentDate = new Date(2025, 9, 1); // October 2025

            function renderCalendar() {
                calendarBody.innerHTML = '';
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();

                currentMonthYearEl.textContent = `Tháng ${month + 1} ${year}`;
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const lastDayIndex = lastDay.getDay();
                const lastDayDate = lastDay.getDate();
                const prevLastDay = new Date(year, month, 0);
                const prevLastDayDate = prevLastDay.getDate();
                
                // Adjust for Monday start
                let startingDay = firstDay.getDay() - 1;
                if (startingDay < 0) startingDay = 6;

                // --- Previous Month's Days ---
                for (let x = startingDay; x > 0; x--) {
                    calendarBody.innerHTML += `<div class="calendar-day other-month p-2 border-t border-l border-gray-100"><span class="text-sm">${prevLastDayDate - x + 1}</span></div>`;
                }

                // --- Current Month's Days ---
                const today = new Date();
                for (let i = 1; i <= lastDayDate; i++) {
                    let dayClass = 'calendar-day bg-white p-2 border-t border-l border-gray-100 overflow-hidden';
                    if (year === today.getFullYear() && month === today.getMonth() && i === today.getDate()) {
                        dayClass += ' today';
                    }

                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    const dayShifts = scheduleData[dateStr] || [];
                    
                    let shiftsHtml = '';
                    dayShifts.forEach(item => {
                        const shiftInfo = shifts[item.shift];
                        if (shiftInfo) {
                           shiftsHtml += `<div class="shift-tag ${shiftInfo.color}" title="${item.name} - ${item.shift} (${shiftInfo.time})"><span class="font-semibold mr-1.5">${item.name}:</span><span>${item.shift}</span></div>`;
                        }
                    });

                    calendarBody.innerHTML += `
                        <div class="${dayClass}">
                            <div class="text-sm font-semibold mb-1">${i}</div>
                            <div class="text-xs space-y-1">${shiftsHtml}</div>
                        </div>`;
                }
                
                // --- Next Month's Days ---
                const nextDays = 7 - (lastDayIndex === 0 ? 7 : lastDayIndex);
                for (let j = 1; j <= nextDays; j++) {
                     calendarBody.innerHTML += `<div class="calendar-day other-month p-2 border-t border-l border-gray-100"><span class="text-sm">${j}</span></div>`;
                }
            }

            prevMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            nextMonthBtn.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            renderCalendar();
        });
    </script>
</body>
</html>
